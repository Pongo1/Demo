(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){},332:function(e,t,a){e.exports=a.p+"static/media/logo.ae19d4e1.svg"},341:function(e,t,a){e.exports=a(617)},546:function(e,t,a){e.exports=a.p+"static/media/loader.e380a832.gif"},617:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),s=a.n(o),l=(a(108),a(1)),c=a(2),i=a(4),u=a(3),m=a(5),d=a(29),p=a(31),h=a.n(p),f=a(51),E=a(307),v=a.n(E),g=a(6),b=a(10),y=a(81),O=a.n(y),N=a(33),k=a.n(N),j=a(9),S=a(8),C=a(24),x=function(e){return function(t){return t({type:"LOGIN",payload:e})}},D=function(){return function(e){return e({type:"LOGOUT"})}},T=function(e){return function(t){return t({type:"LOAD_TODO",payload:e})}},_=function(e){return function(t){return t({type:"ADD_TO_TODO",payload:e})}},w=function(e){return function(t){return t({type:"REMOVE_FROM_TODO",payload:e})}},A=function(e){return function(t){return t({type:"LOAD_DONE",payload:e})}},L=function(e){return function(t){return t({type:"ADD_TO_DONE",payload:e})}},I=function(e){return function(t){return t({type:"REMOVE_FROM_DONE",payload:e})}},P=function(e){return function(t){return t({type:"MOVE_TO_DONE",payload:e})}},R=function(e){return function(t){return t({type:"LOAD_USER_COMMUNITIES",payload:e})}},M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){a.props.firebase.auth().signOut(),a.props.reduxLogout()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{onClick:this.onClick},this.props.children)}}]),t}(r.a.Component),F=Object(S.connect)(null,{reduxLogout:D})(Object(C.withFirebase)(M)),V={ROOT:"http://api.massenergize.org"};V.V2=V.ROOT+"/v2/",V.COMMUNITY=V.V2+"community/",V.ACTIONS=V.V2+"actions",V.ACTION=V.V2+"action",V.ACTION_PROPERTIES=V.V2+"action-properties",V.ACTION_PROPERTY=V.V2+"action-property",V.BILLING_STATEMENTS=V.V2+"billing-statements",V.BILLING_STATEMENT=V.V2+"billing-statement",V.COMMUNITIES=V.V2+"communities",V.COMMUNITY_ADMINS=V.V2+"community-admins",V.COMMUNITY_ADMIN_GROUP=V.V2+"community-admin-group/",V.COMMUNITIES_STATS=V.V2+"communities/stats",V.DATA=V.V2+"data",V.EMAIL_CATEGORIES=V.V2+"email-categories",V.EMAIL_CATEGORY=V.V2+"email-category",V.EVENTS=V.V2+"events",V.EVENT=V.V2+"event",V.EVENT_ATTENDEES=V.V2+"event-attendees",V.EVENT_ATTENDEE=V.V2+"event-attendee",V.GOALS=V.V2+"goals",V.GOAL=V.V2+"goal",V.GRAPHS=V.V2+"graphs",V.GRAPH=V.V2+"graph",V.HOUSEHOLDS=V.V2+"households",V.HOUSEHOLD=V.V2+"household",V.LOCATIONS=V.V2+"locations",V.LOCATION=V.V2+"location",V.MEDIA=V.V2+"media",V.MENUS=V.V2+"menus",V.MENU=V.V2+"menu",V.PAGES=V.V2+"pages",V.PAGE=V.V2+"page",V.PAGE_SECTIONS=V.V2+"page-sections",V.PAGE_SECTION=V.V2+"page-section",V.PERMISSIONS=V.V2+"permissions",V.PERMISSION=V.V2+"permission",V.POLICIES=V.V2+"policies",V.POLICY=V.V2+"policy",V.ROLES=V.V2+"roles",V.ROLE=V.V2+"role",V.SERVICES=V.V2+"services",V.SERVICE=V.V2+"service",V.SLIDERS=V.V2+"sliders",V.SLIDER=V.V2+"slider",V.SLIDER_IMAGES=V.V2+"slider-images",V.SLIDER_IMAGE=V.V2+"slider-image",V.STATISTICS=V.V2+"statistics",V.STATISTIC=V.V2+"statistic",V.STORIES=V.V2+"stories",V.STORY=V.V2+"story",V.SUBSCRIBERS=V.V2+"subscribers",V.SUBSCRIBER=V.V2+"subscriber",V.SUBSCRIBER_EMAIL_PREFS=V.V2+"subscriber-email-preferences",V.SUBSCRIBER_EMAIL_PREF=V.V2+"subscriber-email-preference",V.TAGS=V.V2+"tags",V.TAG=V.V2+"tag",V.TAG_COLLECTIONS=V.V2+"tag-collections",V.TAG_COLLECTION=V.V2+"tag-collection",V.TEAMS=V.V2+"teams",V.TEAM=V.V2+"team",V.TEAMS_STATS=V.V2+"teams/stats",V.TESTIMONIALS=V.V2+"testimonials",V.TESTIMONIAL=V.V2+"testimonial",V.USERS=V.V2+"users",V.USER=V.V2+"user",V.USER_GROUPS=V.V2+"user-groups",V.USER_GROUP=V.V2+"user-group",V.VENDORS=V.V2+"vendors",V.VENDOR=V.V2+"vendor",V.VERIFY=V.V2+"verify";var H=V,U=function(){var e=Object(f.a)(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"GET",credentials:"include"});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(h.a.mark(function e(t,a){var n,r,o,s;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U("".concat(H.ROOT,"/auth/csrf"));case 3:return n=e.sent,r=n.data.csrfToken,e.next=7,fetch(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":r},body:JSON.stringify(a)});case 7:return o=e.sent,e.next=10,o.json();case 10:return s=e.sent,e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"DELETE",credentials:"include"});case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),G=function(e,t,a){return(a?e:e.sections).filter(function(e){return e.name===t})[0]},Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleResize=function(){a.setState({menuBurgered:window.outerWidth<992}),a.forceUpdate()},a.state={menuBurgered:window.innerWidth<992,menuOpen:!1},a.handleLinkClick=a.handleLinkClick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleMenuClick",value:function(){this.setState({menuOpen:!this.state.menuOpen})}},{key:"handleLinkClick",value:function(){this.setState({menuOpen:!this.state.menuOpen})}},{key:"render",value:function(){var e=this,t=null,a=null;this.props.pageData&&this.props.pageData.community.name;this.props.pageData&&(t=(a=G(this.props.pageData,"HomeHeader")).image?a.image.url:null);var n=this.props.links,o={container:{position:"relative",width:"100%",height:"80px",zIndex:"99",display:"flex",background:"white",color:"#333",fontFamily:"Verdana"},body:{display:"flex",flexDirection:"column",alignItems:"center",filter:this.state.menuOpen?"blur(2px)":null,transition:"filter 0.5s ease"}};if(!n)return null;var s=this.props.navLinks.map(function(t,a){return t.children?r.a.createElement(K,{key:a,navlink:t,links:n,index:a,clickHandler:e.handleLinkClick}):r.a.createElement(X,{key:a,delay:"".concat(.1*a,"s"),onClick:function(){e.handleLinkClick()},href:n.home+t.link},t.name)});return r.a.createElement("div",null,r.a.createElement("nav",{className:"theme_menu navbar p-0  z-depth-1 ".concat(this.props.sticky?"fixed-top border-bottom":""),style:{height:"90px",position:"fixed",width:"100%",background:"white"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row no-gutter width-100"},r.a.createElement("div",{className:"col-lg-4 col-md-8 col-sm-6 col-6 d-flex"},r.a.createElement("div",{onClick:function(){window.location="/"},className:"",style:{cursor:"pointer",position:"relative",padding:18,marginLeft:-100}},r.a.createElement(j.a,{to:n.home},r.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle",fontFamily:"verdana",fontSize:"30px",textTransform:"uppercase",fontWeight:"bold",height:"35px",color:"#8dc63f"}},r.a.createElement("img",{src:t||O.a,alt:"",style:{display:"inline-block"},className:"header-logo"}),t?null:r.a.createElement(r.a.Fragment,null,"\xa0",a?a.title:null))))),this.state.menuBurgered?r.a.createElement("div",{className:"col-lg-8 col-md-4 col-sm-6 col-6 menu-column"},r.a.createElement("div",{style:o.container},r.a.createElement(Z,{open:this.state.menuOpen,onClick:function(){return e.handleMenuClick()},color:"#333"}),this.renderLogin()),r.a.createElement(Q,{open:this.state.menuOpen},s)):r.a.createElement("div",{className:"col-lg-7 col-md-4 col-sm-6 col-6 menu-column"},r.a.createElement("div",{style:o.container,className:"push-to-right"},r.a.createElement("nav",{className:"padding-0 menuzord d-flex ml-auto",style:{display:"inline-block",padding:25,paddingTop:33},id:"main_menu"},r.a.createElement("ul",{className:"cool-font menuzord-menu height-100 d-flex flex-row"},this.renderNavLinks(this.props.navLinks))),this.renderLogin()))))))}},{key:"renderNavLinks",value:function(e){var t=this;if(!e)return r.a.createElement("li",{key:"noLinks"},"No PageLinks to Display");var a={borderTop:"5px solid #8dc63f",borderRadius:"0",padding:"0"},n=this.props.links;return Object.keys(e).map(function(o){var s=e[o];return s.children?r.a.createElement("li",{className:"d-flex flex-column justify-content-center",key:s.name},r.a.createElement(k.a,{onSelect:function(){return null}},r.a.createElement(k.a.Toggle,{as:J,navLink:s,id:"dropdown-custom-components"}),r.a.createElement(k.a.Menu,{style:a},t.renderDropdownItems(s.children)))):r.a.createElement("li",{className:"d-flex flex-column justify-content-center",key:s.name},r.a.createElement(j.a,{className:"cool-font",to:"".concat(n.home).concat(s.link)},s.name))})}},{key:"renderDropdownItems",value:function(e){if(this.props.links){var t=this.props.links;return e.map(function(e,a){return r.a.createElement(j.a,{key:a,to:"".concat(t.home).concat(e.link),className:"cool-font dropdown-item p-3 small ",onClick:function(){return document.dispatchEvent(new MouseEvent("click"))}},e.name)})}}},{key:"renderLogin",value:function(){var e=this,t=this.props.links,a=this.props,n=a.auth,o=a.user;return n.uid&&o.info?r.a.createElement(k.a,{onSelect:function(){return null},className:"d-flex"},r.a.createElement(k.a.Toggle,{as:q,userName:o.info.preferred_name,id:"dropdown-custom-components"}),r.a.createElement(k.a.Menu,{style:{borderTop:"5px solid #8dc63f",borderRadius:"0",padding:"0"}},r.a.createElement(j.a,{to:t.profile,className:"dropdown-item p-3 small font-weight-bold cool-font",onClick:function(){return document.dispatchEvent(new MouseEvent("click"))}},"My Profile"),r.a.createElement("button",{className:"dropdown-item p-3 small font-weight-bold cool-font",onClick:function(){e.props.firebase.auth().signOut(),e.props.reduxLogout()}},r.a.createElement(F,null,"Sign Out")))):r.a.createElement(j.a,{className:"cool-font new-sign-in float-right round-me raise",to:t.signin},r.a.createElement("i",{className:"fa fa-user",style:{padding:"0px 2px"}}),"\xa0","Login")}}]),t}(r.a.Component),W=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user,pageData:e.page.homePage,links:e.links}},{reduxLogout:D})(Object(C.withFirebase)(Y)),q=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e,a))).handleClick=n.handleClick.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return r.a.createElement("button",{className:"thm-btn float-right new-sign-in raise",onClick:this.handleClick,style:{margin:"auto 0 auto 10px",fontSize:"12px",fontWeight:600}},r.a.createElement("i",{className:"fa fa-user"}),"\xa0",this.props.userName,r.a.createElement("span",{className:"fa fa-angle-down text-white ml-1"}))}}]),t}(r.a.Component),J=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e,a))).handleClick=n.handleClick.bind(Object(b.a)(Object(b.a)(n))),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick(e)}},{key:"render",value:function(){return r.a.createElement(j.a,{className:"cool-font",to:"",onClick:this.handleClick},this.props.navLink.name," ",r.a.createElement("span",{className:"font-normal fa fa-angle-down"}))}}]),t}(r.a.Component),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={open:!1},a.handleClick=a.handleClick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(){this.setState({open:!this.state.open})}},{key:"renderSubmenuItems",value:function(e){var t=this,a=this.props.links;return e.map(function(e,n){return r.a.createElement(X,{key:n,href:a.home+e.link,onClick:t.props.clickHandler},e.name)})}},{key:"render",value:function(){this.props.links;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X,{key:this.props.index,delay:"".concat(.1*this.props.index,"s"),onClick:this.handleClick,href:"#"},this.props.navlink.name),r.a.createElement("div",{style:{marginLeft:"1em"}},r.a.createElement(Q,{open:this.state.open,submenu:!0},this.renderSubmenuItems(this.props.navlink.children))))}}]),t}(r.a.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={hover:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleHover",value:function(){this.setState({hover:!this.state.hover})}},{key:"render",value:function(){var e=this,t={container:{animation:"1s appear backwards",animationDelay:this.props.delay},menuItem:{color:this.state.hover?"#8ec449":"#303030",fontWeight:"700",fontFamily:"Verdana",fontSize:"1rem",padding:".5rem 0",margin:"0 5%",cursor:"pointer",transition:"color 0.2s ease-in-out",animation:"0.5s slideIn forwards",animationDelay:this.props.delay},line:{width:"90%",height:"1px",background:"gray",margin:"0 auto",animation:"0.5s shrink forwards",animationDelay:this.props.delay}};this.props.links;return r.a.createElement("div",{style:t.container},r.a.createElement(j.a,{className:"width-100",style:t.menuItem,onMouseEnter:function(){e.handleHover()},onMouseLeave:function(){e.handleHover()},onClick:this.props.onClick,to:this.props.href},this.props.children),r.a.createElement("div",{style:t.line}))}}]),t}(r.a.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={open:!!a.props.open&&a.props.open},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.open!==this.state.open&&this.setState({open:e.open})}},{key:"render",value:function(){var e={container:{position:this.props.submenu?"relative":"absolute",width:this.props.submenu?"100%":"50%",height:this.state.open?this.props.submenu?"100%":"calc(100vh - 100px)":0,display:"flex",flexDirection:"column",background:"white",color:"black",transition:"height 0.3s ease",zIndex:2},menuList:{paddingTop:this.props.submenu?"0":"3rem"}};return this.props.submenu||(document.body.className=this.state.open?"burger-menu-open":""),r.a.createElement("div",{style:e.container},this.state.open?r.a.createElement("div",{style:e.menuList},this.props.children):null)}}]),t}(r.a.Component),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={open:!!a.props.open&&a.props.open,color:a.props.color?a.props.color:"black"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.open!==this.state.open&&this.setState({open:e.open})}},{key:"handleClick",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this,t={container:{justifyContent:"flex-end",marginTop:"auto",marginBottom:"auto",marginLeft:"auto",height:"32px",width:"32px",cursor:"pointer",padding:"4px"},line:{height:"2px",width:"29px",background:this.state.color,transition:"all 0.2s ease"},lineTop:{transform:this.state.open?"rotate(45deg)":"none",transformOrigin:"top left",marginBottom:"8px"},lineMiddle:{opacity:this.state.open?0:1,transform:this.state.open?"translateX(-16px)":"none"},lineBottom:{transform:this.state.open?"translateX(-1px) rotate(-45deg)":"none",transformOrigin:"top left",marginTop:"8px"}};return r.a.createElement("div",{style:t.container,onClick:this.props.onClick?this.props.onClick:function(){e.handleClick()}},r.a.createElement("div",{style:Object(g.a)({},t.line,t.lineTop)}),r.a.createElement("div",{style:Object(g.a)({},t.line,t.lineMiddle)}),r.a.createElement("div",{style:Object(g.a)({},t.line,t.lineBottom)}))}}]),t}(r.a.Component),$=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(this.props.sticky){return r.a.createElement("div",{style:{height:"100px"}})}return null}}]),t}(r.a.Component),ee=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.pageData?G(this.props.pageData,"HomeHeader"):null,t=e&&e.image?e.image.url:null;return r.a.createElement("div",{className:"col-7 col-md-4"},r.a.createElement("div",{className:"footer-widget about-column"},r.a.createElement("figure",null,r.a.createElement(j.a,{to:this.props.links.home},r.a.createElement("img",{src:t||O.a,alt:"",style:{display:"inline-block"},className:"header-logo"}))),r.a.createElement("ul",{className:"contact-info"},r.a.createElement("li",null,r.a.createElement("span",{className:"icon-e-mail-envelope"})," ",this.props.info.email),r.a.createElement("li",null,r.a.createElement("span",{className:"icon-phone-call"}),this.props.info.phone),r.a.createElement("li",null,r.a.createElement("span",{className:"icon-people3"}),this.props.info.contactPerson,", ",r.a.createElement("i",null,"Community Contact")))))}}]),t}(r.a.Component),te=Object(S.connect)(function(e){return{pageData:e.page.homePage,links:e.links}},null)(ee),ae=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderLinks",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a];return r.a.createElement("li",{key:n.name},r.a.createElement(j.a,{className:"cool-font",to:"".concat(t.props.reduxLinks.home,"/").concat(n.link)},n.name))}):r.a.createElement("div",null,"No Links to Display")}},{key:"render",value:function(){var e=this.props.links,t=Math.ceil(e.length/2),a=e.slice(0,t),n=e.slice(t,e.length);return r.a.createElement("div",{className:"col-5 col-md-4"},r.a.createElement("div",{className:"footer-widget link-column"},r.a.createElement("div",{className:"section-title d-none d-md-block"},r.a.createElement("b",{className:"text-white"},this.props.title)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"widget-content"},r.a.createElement("ul",{className:"list mb-0 cool-font"},this.renderLinks(a)))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"widget-content"},r.a.createElement("ul",{className:"list mb-0"},this.renderLinks(n)))))))}}]),t}(r.a.Component),ne=Object(S.connect)(function(e){return{pageData:e.page.homePage,reduxLinks:e.links}},null)(ae),re=a(19),oe={email:"",name:"",message:"Your mail id is confidential"},se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state=Object(g.a)({},oe),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer-widget contact-column text-center text-md-left"},r.a.createElement("div",{className:"section-title"},r.a.createElement("b",{className:"text-white"},"Subscribe to Newsletter")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{className:"text-white",type:"text",placeholder:"Name...",name:"name",value:this.state.name,onChange:this.onChange,required:!0}),r.a.createElement("input",{className:"text-white",type:"email",placeholder:"Email address...",name:"email",value:this.state.email,onChange:this.onChange,required:!0}),r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"fa fa-paper-plane"}))),r.a.createElement("p",{className:"cool-font"},this.state.message))}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,name:this.state.name,community:this.props.community?this.props.community.id:null};B(H.SUBSCRIBERS,a).then(function(e){if(console.log(e),e.success)t.setState(Object(g.a)({},oe,{message:"Success! ".concat(t.state.email," is now subscribed to our Community's Newsletter")}));else{var a=!1;e.errors.forEach(function(e){e.includes("duplicate")&&(t.setState(Object(g.a)({},oe,{message:"".concat(t.state.email," is already subscribed to our Community's Newsletter")})),a=!0)}),a||t.setState(Object(g.a)({},oe,{message:"unknown error while subscribing"}))}})}}]),t}(r.a.Component),le=Object(S.connect)(function(e){return{community:e.page.community}})(se),ce=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("footer",{className:"main-footer m-footer-color"},r.a.createElement("div",{className:"widgets-section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"big-column"},r.a.createElement("div",{className:"row clearfix"},r.a.createElement(te,{info:this.props.footerInfo?this.props.footerInfo:{}}),r.a.createElement(ne,{title:"Quick Links",links:this.props.footerLinks}),r.a.createElement("div",{className:"col-12 col-md-4"},r.a.createElement(le,null))))))),r.a.createElement("section",{className:"footer-bottom m-footer-color"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"pull-left copy-text"},r.a.createElement("p",{className:"cool-font"},r.a.createElement("a",{href:"https://massenergize.org"},"Copyrights \xa9 2019")," All Rights Reserved. Powered by ",r.a.createElement("a",{href:"https://massenergize.org"},"MassEnergize"))),r.a.createElement("div",{className:"pull-right get-text"},r.a.createElement(j.a,{to:this.props.links.donate},"Donate Now")))),r.a.createElement("section",{className:"coders ",style:{background:"black"}},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"m-0",style:{fontSize:"12px"}},"Made with\xa0",r.a.createElement("span",{className:"fa fa-heart text-danger"})," by\xa0",r.a.createElement("a",{className:"normal"},r.a.createElement("u",null,"Sam Opoku-Agyemang")),",\xa0",r.a.createElement("a",{className:"normal"},r.a.createElement("u",null,"Kieran O'Day")),",\xa0",r.a.createElement("a",{className:"normal"},r.a.createElement("u",null,"Mingle Li")),"."))))}}]),t}(r.a.Component),ie=Object(S.connect)(function(e){return{links:e.links}})(ce),ue=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"d-flex height-100vh justify-content-center align-items-center"},r.a.createElement("img",{src:a(546),alt:"Loading...",style:{width:"10em"}}))}}]),t}(r.a.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleResize=function(){a.forceUpdate()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,t=this.props.data[0].image.url,a=this.props.data[1].image.url,n=this.props.data[2].image.url;return e=window.innerWidth>1100?{backgroundImage:"url(".concat(t,"), url(").concat(a,"), url(").concat(n,")"),backgroundSize:"33.333333%",backgroundPosition:"left top, center top, right top"}:window.innerWidth>750?{backgroundImage:"url(".concat(t,"), url(").concat(a,")"),backgroundSize:"50%",backgroundPosition:"left top, right top"}:{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",backgroundPosition:"left top"},r.a.createElement("div",{className:"inner-banner text-center",style:e},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"box"})))}}]),t}(r.a.Component),de=a(137),pe=a.n(de),he=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={options:{chart:{type:"radialBar"},series:[67],colors:a.props.colors,plotOptions:{radialBar:{size:a.props.size,track:{show:!0,width:"100px"},dataLabels:{name:{offsetY:-3,color:"#666",fontSize:"13px",fontFamily:"Verdana-bold"},value:{offsetY:3,color:"#666",fontSize:"18px",fontFamily:"Verdana",show:!0,formatter:function(){return a.props.num}}}}},stroke:{lineCap:"round"},labels:[a.props.label]},series:[a.props.num/a.props.goal*100]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(pe.a,{options:this.state.options,series:this.state.series,type:"radialBar",className:"apex-chart circle-graph"})}}]),t}(r.a.Component),fe=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderGraphs",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a];return null==n.data&&console.log(n),r.a.createElement("div",{key:a,className:"column col-lg-3 col-md-6 col-sm-6 col-xs-12","data-wow-duration":"0ms"},r.a.createElement(he,{num:n.data.value,goal:n.data.denominator,label:n.title,size:t.props.size}))}):r.a.createElement("div",null,"No Graphs to Display")}},{key:"render",value:function(){var e="";return this.props.graphs&&2===Object.keys(this.props.graphs).length&&(e=r.a.createElement("article",{className:"column col-md-3"})),r.a.createElement("section",{className:"fact-counter style-2 no-padd"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row no-gutter clearfix"},e,this.renderGraphs(this.props.graphs),r.a.createElement("article",{className:"column counter-column col-lg-3 col-md-6 col-sm-6 col-xs-12 wow fadeIn","data-wow-duration":"0ms"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:"fa fa-chart-bar"})),r.a.createElement(j.a,{to:this.props.links.impact,className:"thm-btn btn-finishing"},"Our Impact"))))))}}]),t}(r.a.Component),Ee=Object(S.connect)(function(e){return{links:e.links}})(fe),ve=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"service-item center hover-service-item"},r.a.createElement(j.a,{to:"".concat(this.props.links.home).concat(this.props.link),style:{width:"100%",height:"100%"}},r.a.createElement("div",{className:"icon-box text-center"},r.a.createElement("span",{className:this.props.icon})),r.a.createElement("h4",{className:"cool-font"},this.props.title),r.a.createElement("p",{className:"cool-font"},this.props.description)))}}]),t}(r.a.Component),ge=Object(S.connect)(function(e){return{links:e.links}})(ve),be=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderBoxes",value:function(e){return e?Object.keys(e).map(function(t,a){var n=e[t];return r.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6 col-12 d-flex flex-row",key:a},r.a.createElement(ge,{key:a,title:n.title,description:n.description,icon:n.icon,link:n.link}))}):r.a.createElement("div",null,"No Icon Boxes to Display")}},{key:"render",value:function(){return r.a.createElement("section",{className:"service p-5",style:{background:"white"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section-title center "},r.a.createElement("h2",{class:"text-white cool-font m-service-title"},this.props.title)),r.a.createElement("div",{className:"row d-flex flex-row"},this.renderBoxes(this.props.boxes))))}}]),t}(r.a.Component),ye={LIMIT:140,BIG_LIMIT:300},Oe=ye,Ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderEvents",value:function(e,t,a,n){var o=this;if(!e&&n)return r.a.createElement("div",null,"No Events to Display");var s=[];if(Object.keys(e).forEach(function(t){var a=new Date,n=e[t],r=new Date(n.start_date_and_time),o=new Date(n.end_date_and_time);(r-a>0||o-a>0)&&s.push(n)}),0===s.length&&n)return r.a.createElement("div",null,r.a.createElement("p",{className:"cool-font"}," Sorry, no upcoming events. See all ",r.a.createElement(j.a,{to:this.props.links.events}," events")));var l=0;return s.map(function(e){if(l>=t&&l<a){var n="item style-2";0===l&&(n="item style-1"),l+=1;var s=new Date(e.start_date_and_time),c=new Date(e.end_date_and_time);return r.a.createElement("div",{key:l,className:n},r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"img-column"},r.a.createElement("figure",{className:"img-holder"},r.a.createElement(j.a,{to:"".concat(o.props.links.events,"/").concat(e.id)},r.a.createElement("img",{src:e.image?e.image.url:"",alt:""})))),r.a.createElement("div",{className:"text-column"},r.a.createElement("div",{className:"lower-content"},r.a.createElement(j.a,{className:"cool-font",to:"".concat(o.props.links.events,"/").concat(e.id)},r.a.createElement("h4",null,e.name)),r.a.createElement("div",null,e.description.length>Oe.LIMIT?r.a.createElement("p",{className:"cool-font"},e.description.substring(0,Oe.LIMIT),"\xa0",r.a.createElement(j.a,{to:"".concat(o.props.links.events,"/").concat(e.id)}," ...more ")):r.a.createElement("p",{className:"cool-font"}," ",e.description," "))))),r.a.createElement("ul",{className:"post-meta list_inline"},r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-clock-o"}),o.sameDay(s,c)?"".concat(s.toLocaleTimeString()," - ").concat(c.toLocaleTimeString()):"".concat(s.toLocaleTimeString())),"  |\xa0\xa0\xa0",r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-calendar"}),o.sameDay(s,c)?s.toString().substring(4,10):"".concat(s.toString().substring(4,10)," - ").concat(c.toString().substring(4,10)),", ",s.getFullYear().toString()),e.location?r.a.createElement("li",null,"\xa0|\xa0\xa0\xa0",r.a.createElement("i",{className:"fa fa-map-marker"})," ",e.location.street,", ",e.location.city,", ",e.location.state," ",e.location.zip):null))}return l+=1,null})}},{key:"render",value:function(){return r.a.createElement("section",{className:"event-style1",style:{background:"floralwhite"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 col-sm-10 col-xs-12 text-center text-sm-left"},r.a.createElement("div",{className:"section-title m-0"},r.a.createElement("h2",{className:"cool-font"},"Upcoming Events"))),r.a.createElement("div",{className:"col-md-3 col-sm-2 col-xs-12 text-center text-sm-right"},r.a.createElement(j.a,{to:"".concat(this.props.links.events),className:"cool-font thm-btn mb-4 btn-finishing"},"All Events"))),r.a.createElement("div",{className:"row"},r.a.createElement("article",{className:"col-md-6 col-sm-12 col-xs-12"},this.renderEvents(this.props.events,0,1,!0)),r.a.createElement("article",{className:"col-md-6 col-sm-12 col-xs-12"},this.renderEvents(this.props.events,1,3,!1)))))}}]),t}(r.a.Component),ke=Object(S.connect)(function(e){return{links:e.links}})(Ne),je=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.pageData)return r.a.createElement("p",{className:"text-center"}," Sorry, looks like this community's Home Page is under maintenance. Try again later ");this.props.pageData.description;var e=this.props,t=e.pageData,a=e.events,n=G(t,"WelcomeImages").slider[0].slides,o=G(t,"IconQuickLinks").cards,s=G(t,"HomeHeader"),l=[{title:"Actions Completed",data:this.props.graphsData?this.props.graphsData.filter(function(e){return"ActionsCompletedData"===e.name})[0]:null},{title:"Households Engaged",data:this.props.graphsData?this.props.graphsData.filter(function(e){return"EngagedHouseholdsData"===e.name})[0]:null}];return r.a.createElement("div",{className:"boxed_wrapper",style:{paddingTop:91}},n?r.a.createElement(me,{data:n,title:s.title}):null,r.a.createElement("div",{style:{padding:30,background:"floralwhite"}},r.a.createElement("h4",{align:"center",className:"cool-font"},this.props.pageData.community.name),r.a.createElement("p",{align:"center",className:" col-md-8 col-lg-8 offset-md-2 cool-font ",style:{color:"#383838"}},"Laborum nostrud incididunt nulla est pariatur anim ex incididunt commodo veniam pariatur esse deserunt. Fugiat amet ea non in ipsum aute reprehenderit. Velit ipsum duis minim sunt. Eu magna velit eiusmod adipisicing enim Lorem ullamco. Excepteur labore deserunt elit esse consequat sunt. Laborum duis duis ipsum tempor enim esse sit velit consectetur ipsum est qui.")),this.props.graphsData?r.a.createElement(Ee,{graphs:l,size:120}):null,o?r.a.createElement(be,{title:"Get started - See your local options!",boxes:o}):null,a?r.a.createElement(ke,{events:a}):null)}}]),t}(r.a.Component),Se=Object(S.connect)(function(e){return{pageData:e.page.homePage,events:e.page.events,graphsData:e.page.communityData}},null)(je),Ce=function(e){return function(t){return t({type:"LOAD_COMMUNITIES_STATS",payload:e})}},xe=function(e){return function(t){return t({type:"LOAD_COMMUNITIES",payload:e})}},De=function(e){return function(t){return t({type:"TEAM_ADD_ACTION",payload:e})}},Te=function(e){return function(t){return t({type:"TEAM_REMOVE_ACTION",payload:e})}},_e=function(e){return function(t){return t({type:"CHANGE_DATA",payload:e})}},we=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"breadcumb-wrapper"},r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"pull-left"},r.a.createElement("ul",{class:"list-inline link-list"},r.a.createElement("li",null,r.a.createElement(j.a,{to:this.props.reduxLinks.home,className:"link"}," Home ")),Object.keys(this.props.links).map(function(t){var a=e.props.links[t];return a.link?r.a.createElement("li",{key:t},r.a.createElement(j.a,{to:"".concat(a.link),className:"link"},a.name)):a.name?r.a.createElement("li",{key:t},a.name):void 0})))))}}]),t}(r.a.Component),Ae=Object(S.connect)(function(e){return{reduxLinks:e.links}})(we),Le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={open:!!e.open&&e.open},a.handleClick=a.handleClick.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"accordian-header d-flex flex-row align-items-center",onClick:this.handleClick},this.props.header,this.state.open?r.a.createElement("i",{className:"fa fa-caret-up"}):r.a.createElement("i",{className:"fa fa-caret-down"})),r.a.createElement("div",{className:this.state.open?"accordian-content":"accordian-content hidden"},this.props.content))}},{key:"handleClick",value:function(){this.setState({open:!this.state.open})}}]),t}(r.a.Component),Ie=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper shop-sidebar mb-5"},r.a.createElement("br",null),r.a.createElement("h4",null,"Filter by..."),this.renderTagCollections(this.props.tagCols))}},{key:"renderTagCollection",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a];return r.a.createElement("label",{className:"checkbox-container",onClick:t.props.onChange,key:a},r.a.createElement("p",{style:{marginLeft:"25px",marginBottom:"0",padding:"4px 0 5px 0"}},n.name),r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"boxes",id:"filtertag"+n.id,value:n.name}),r.a.createElement("span",{className:"checkmark"}))}):r.a.createElement("p",null,"No Filter Available")}},{key:"renderTagCollections",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a],o=r.a.createElement("div",{className:"section-title w-100"},r.a.createElement("span",null,n.name)),s=r.a.createElement("form",{className:"list"},t.renderTagCollection(n.tags));return r.a.createElement("div",{className:"category-style-one",key:a},r.a.createElement(Le,{open:"Category"===n.name,header:o,content:s,onChange:t.props.onChange}))}):r.a.createElement("p",null,"No Filters Available")}}]),t}(r.a.Component),Pe=a(312),Re=a.n(Pe),Me=a(313),Fe=a.n(Me),Ve=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=r.a.createElement(Re.a,{title:this.props.title?this.props.title:""},this.props.text);return r.a.createElement("div",null,r.a.createElement(Fe.a,{trigger:"hover",placement:this.props.dir,overlay:e},this.props.children))}}]),t}(r.a.Component),He=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e&&e.preventDefault(),a.state.choice?("TODO"===a.props.status?a.props.inCart(a.props.aid,a.state.choice)||(console.log("adding to todo"),a.props.addToCart(a.props.aid,a.state.choice,a.props.status),a.props.closeForm()):"DONE"===a.props.status&&(a.props.inCart(a.props.aid,a.state.choice)?a.props.inCart(a.props.aid,a.state.choice,"TODO")&&(console.log("moving to done"),a.props.moveToDone(a.props.aid,a.state.choice),a.props.closeForm()):(console.log("adding to done"),a.props.addToCart(a.props.aid,a.state.choice,a.props.status),a.props.closeForm())),a.setState({choice:null})):a.setState({choice:null,error:"Please select a household"})},a.checkHouseholds=function(){if(a.props.open){for(var e=[],t=0;t<a.props.user.households.length;t++){var n=a.props.user.households[t];("DONE"===a.props.status&&!a.props.inCart(a.props.aid,n.id,"DONE")||"TODO"===a.props.status&&!a.props.inCart(a.props.aid,n.id))&&e.push(n.id)}console.log(e),a.state.error||a.state.choice||(0===e.length?a.setState({error:"You have already added this action for all of your households"}):(console.log(e[0]),a.setState({choice:e[0]})))}},a.state={error:null},a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){e.status!==this.props.status&&this.setState({error:null})}},{key:"render",value:function(){return this.checkHouseholds(),r.a.createElement(r.a.Fragment,null,this.props.open?r.a.createElement("div",null,this.state.error?r.a.createElement("p",{className:"text-danger"}," ",this.state.error," "):null,r.a.createElement("form",{onSubmit:this.handleSubmit},this.renderRadios(this.props.user.households),r.a.createElement("div",null,r.a.createElement("button",{className:"thm-btn style-4",type:"submit",disabled:!!this.state.error},"Submit"),r.a.createElement("button",{className:"thm-btn style-4 red",onClick:this.props.closeForm}," Cancel ")))):null)}},{key:"renderRadios",value:function(e){var t=this;return Object.keys(e).map(function(a){var n=e[a];if("DONE"===t.props.status&&!t.props.inCart(t.props.aid,n.id,"DONE")||"TODO"===t.props.status&&!t.props.inCart(t.props.aid,n.id))return r.a.createElement("div",{key:a,style:{display:"inline-block"}},r.a.createElement("input",{id:""+n.name+a,type:"radio",value:n.id,name:"hhchoice",onChange:t.onChange,checked:Number(t.state.choice)===Number(n.id),style:{display:"inline-block"}}),"\xa0",r.a.createElement("label",{htmlFor:""+n.name+a}," ",n.name," "),"\xa0\xa0\xa0")})}},{key:"onChange",value:function(e){console.log(e.target.value),this.setState({error:null,choice:e.target.value}),console.log(this.state)}}]),t}(r.a.Component),Ue={title:"",body:"",aid:"--",vid:"--",vendor:"",message:"Already completed an action? Tell Us Your Story",limit:9e3},Be=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).count=function(e){return e.length};var n="Already completed an action? Tell Us Your Story";return e.aid&&(n="Already completed this action? Tell Us Your Story"),e.vid&&(n="Already used this vendor? Tell Us Your Story"),a.state=Object(g.a)({},Ue,{vid:e.vid?e.vid:"--",aid:e.aid?e.aid:"--",captchaConfirmed:!1,message:n}),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.actions&&0!==this.props.actions.length?("other"!==this.state.vid&&""!==this.state.vendor&&this.setState({vendor:""}),r.a.createElement("div",{className:"review-form",style:{border:"1px solid #aaa"}},this.props.noMessage?null:r.a.createElement("div",{className:"tab-title-h4 text center"},r.a.createElement("h4",{className:"p-2"},this.state.message)),r.a.createElement("form",{onSubmit:this.onSubmit,style:{margin:"20px"}},this.props.aid?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," Which action is this testimonial about? "),r.a.createElement("select",{className:"w-100",value:this.state.aid,onChange:function(t){return e.setState({aid:t.target.value})}},r.a.createElement("option",{value:"--"},"--"),this.renderOptions(this.props.actions)),r.a.createElement("br",null)),this.props.vid?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," Who helped you complete this action? "),r.a.createElement("select",{className:"w-100",value:this.state.vid,onChange:function(t){return e.setState({vid:t.target.value})}},r.a.createElement("option",{value:"--"},"Did it myself!"),this.renderOptions(this.props.vendors),r.a.createElement("option",{value:"other"},"Other"))," \xa0 \xa0 \xa0","other"===this.state.vid?r.a.createElement("div",{className:"field-label",style:{display:"inline-block"}},r.a.createElement("input",{type:"text",name:"vendor",value:this.state.vendor,onChange:this.onChange,autoFocus:!0,required:!0})):r.a.createElement("br",null)),r.a.createElement("div",{className:"field-label"},r.a.createElement("p",null,"Story Title*"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.onChange,required:!0})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"field-label"},r.a.createElement("p",{style:{display:"inline-block",float:"left"}},"Your Story*"),r.a.createElement("p",{className:this.state.body.length>this.state.limit?"text-danger":null,style:{display:"inline-block",float:"right"}},this.state.body.length+" / "+this.state.limit+"chars"),r.a.createElement("textarea",{name:"body",value:this.state.body,onChange:this.onChange,style:{width:"100%"},required:!0})))),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit"},"Submit Now"))),this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null))):r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null," Sorry, there are no actions to submit a story about "))}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t))}},{key:"renderOptions",value:function(e){return Object.keys(e).map(function(t){var a=e[t];return r.a.createElement("option",{value:a.id}," ",a.title?a.title:a.name," ")})}},{key:"onSubmit",value:function(e){var t=this;console.log(this.state),e.preventDefault();var a={user:this.props.user.id,vendor:"--"!==this.state.vid&&"other"!==this.state.vid?this.state.vid:null,action:this.props.aid?this.props.aid:this.state.aid,rank:0,body:this.state.body,title:this.state.title,community:this.props.community.id};this.props.aid||this.state.aid&&"--"!==this.state.aid?this.count(this.state.body)>this.state.limit?this.setState({error:"Sorry, your story is too long"}):B(H.TESTIMONIALS,a).then(function(e){console.log(e),e.success?(t.setState(Object(g.a)({},Ue,{message:"Thank you for submitting your story! Our community admins will review it and post it soon."})),t.props.closeForm&&t.props.closeForm("Thank you for submitting your testimonial. Your community admins will review it and post it soon.")):(t.setState(Object(g.a)({},Ue,{error:"There was an error submitting your testimonial"})),t.props.closeForm&&t.props.closeForm("There was an error submitting your testimonial. We are sorry.")),console.log(t.state)}):this.setState({error:"Please choose which action you are writing a testimonial about"})}}]),t}(r.a.Component),ze=Object(S.connect)(function(e){return{user:e.user.info,actions:e.page.actions,vendors:e.page.serviceProviders,community:e.page.community}})(Be),Ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).openForm=function(e){a.setState({status:e}),a.props.openHHForm(a.props.action.id)},a.closeForm=function(){a.setState({status:null}),a.props.closeHHForm()},a.state={status:null,showTestimonialForm:!1,message:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"gotoAction",value:function(){window.location="".concat(this.props.links.actions+"/"+this.props.action.id)}},{key:"render",value:function(){var e=this;return!this.props.HHFormOpen&&this.state.status&&this.setState({status:null}),this.shouldRender()?r.a.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-12"},r.a.createElement("div",{className:"single-shop-item m-action-item"},r.a.createElement("div",{className:"img-box",onClick:function(){e.gotoAction()}}," ",r.a.createElement(j.a,{to:this.props.links.actions+"/"+this.props.action.id},r.a.createElement("img",{src:this.props.action.image?this.props.action.image.url:null,alt:""})),r.a.createElement("figcaption",{className:"overlay"},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"content"},r.a.createElement(j.a,{to:this.props.links.actions+"/"+this.props.action.id},r.a.createElement("i",{className:"fa fa-link","aria-hidden":"true"})))))),r.a.createElement("div",{className:"content-box"},r.a.createElement("div",{className:"inner-box",onClick:function(){e.gotoAction()}},r.a.createElement("h4",null,r.a.createElement(j.a,{className:"cool-font",to:this.props.links.actions+"/"+this.props.action.id}," ",this.props.action.title," "))),r.a.createElement("div",{className:"price-box2",onClick:function(){e.gotoAction()}},r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"float_right"},"Difficulty",r.a.createElement("span",null," ",this.renderTagBar(this.getTag("difficulty"))," ")),r.a.createElement("div",{className:"float_left"},r.a.createElement(Ve,{text:"Shows the level of impact this action makes relative to the other actions.",dir:"top"},r.a.createElement("span",{className:"has-tooltip"},"Impact")),r.a.createElement("span",null,this.renderTagBar(this.getTag("impact")))))),r.a.createElement("div",{className:"price-box3",style:{paddingTop:18}},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-sm-4 col-md-4 col-lg-4 col-4"},r.a.createElement("div",{className:"col-centered"},r.a.createElement(j.a,{to:this.props.links.actions+"/"+this.props.action.id,className:"thm-btn style-4 action-btns cool-font"}," More Info"))),r.a.createElement("div",{className:"col-md-4 col-sm-4 col-lg-4 col-4"},r.a.createElement("div",{className:"col-centered"},this.props.user?r.a.createElement("button",{className:"TODO"===this.state.status?"thm-btn style-4 selected cool-font action-btns":"thm-btn style-4 cool-font action-btns",onClick:function(){return e.openForm("TODO")}}," Add Todo "):r.a.createElement(Ve,{text:"Sign in to make a TODO list"},r.a.createElement("p",{className:"has-tooltip thm-btn style-4 disabled"},"Add Todo")))),r.a.createElement("div",{className:"col-md-4 col-sm-4 col-lg-4 col-4"},r.a.createElement("div",{className:"col-centered"},this.props.user?r.a.createElement("button",{className:"DONE"===this.state.status?"thm-btn style-4 selected cool-font action-btns":"thm-btn style-4 cool-font action-btns",onClick:function(){return e.openForm("DONE")}}," Done It "):r.a.createElement(Ve,{text:"Sign in to mark actions as completed"},r.a.createElement("p",{className:"has-tooltip thm-btn style-4 disabled"},"Done It")))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"col-centered"},r.a.createElement("br",null),this.props.showTestimonialLink?r.a.createElement(r.a.Fragment,null,this.state.showTestimonialForm?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"as-link",onClick:function(){return e.setState({showTestimonialForm:!1})},style:{margin:"auto"}}," Cancel"),r.a.createElement(ze,{aid:this.props.action.id,noMessage:!0,closeForm:function(t){return e.setState({message:t,showTestimonialForm:!1})}})):r.a.createElement(r.a.Fragment,null,this.state.message?r.a.createElement("p",null,this.state.message):r.a.createElement("p",null,"Nice job! How was your experience with this action? Tell us about it in a ",r.a.createElement("button",{className:"as-link",style:{display:"inline-block"},onClick:function(){return e.setState({showTestimonialForm:!0})}},"testimonial"),"."))):null,r.a.createElement(He,{aid:this.props.action.id,status:this.state.status,open:this.props.HHFormOpen,user:this.props.user,addToCart:function(t,a,n){return e.props.addToCart(t,a,n)},inCart:function(t,a,n){return e.props.inCart(t,a,n)},moveToDone:function(t,a){return e.props.moveToDone(t,a)},closeForm:this.closeForm})))))))):null}},{key:"shouldRender",value:function(){if(!this.searchFits(this.props.action.title)&&!this.searchFits(this.props.action.description))return!1;var e=new Set;for(var t in this.props.action.tags.forEach(function(t){e.add(t.id)}),this.props.tagCols){var a=this.props.tagCols[t];if(!this.filterFits(a.tags,e))return!1}return!0}},{key:"searchFits",value:function(e){var t=document.getElementById("action-searchbar");return!t||""===t.value||!!e&&!!e.toLowerCase().includes(t.value.toLowerCase())}},{key:"filterFits",value:function(e,t){var a=!0;for(var n in e){var r=document.getElementById("filtertag"+e[n].id);if(r&&r.checked&&(a=!1,t.has(e[n].id)))return!0}return a}},{key:"getTag",value:function(e){var t=this.props.action.tags.filter(function(t){return t.tag_collection&&t.tag_collection.name&&t.tag_collection.name.toLowerCase()===e.toLowerCase()});return t&&t.length>0?t[0]:null}},{key:"renderTagBar",value:function(e){if(e){if("low"===e.name.toLowerCase()||"easy"===e.name.toLowerCase())return r.a.createElement("div",null,r.a.createElement("div",{className:"tag-bar one"}));if("medium"===e.name.toLowerCase())return r.a.createElement("div",null,r.a.createElement("div",{className:"tag-bar one"}),r.a.createElement("div",{className:"tag-bar two"}));if("high"===e.name.toLowerCase()||"hard"===e.name.toLowerCase())return r.a.createElement("div",null,r.a.createElement("div",{className:"tag-bar one"}," "),r.a.createElement("div",{className:"tag-bar two"}," "),r.a.createElement("div",{className:"tag-bar three"}," "))}return null}}]),t}(r.a.Component),Ye=Object(S.connect)(function(e){return{links:e.links}})(Ge),We=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).moveToDone=function(e){var t={status:"DONE",action:e.action.id,real_estate_unit:e.real_estate_unit.id};B(H.USER+"/"+a.props.user.id+"/action/"+e.id,t).then(function(t){console.log(t),t.success&&(a.props.reduxMoveToDone(t.data),a.addToImpact(e.action))}).catch(function(e){console.log(e)})},a.removeFromCart=function(e){var t=e.status;z("".concat(H.USER,"/").concat(a.props.user.id,"/action/").concat(e.id)).then(function(n){console.log(n),n.success&&("TODO"===t&&a.props.reduxRemoveFromTodo(e),"DONE"===t&&(a.props.reduxRemoveFromDone(e),a.removeFromImpact(e.action)))})},a.removeFromImpact=function(e){a.changeDataByName("ActionsCompletedData",-1),e.tags.forEach(function(e){e.tag_collection&&"Category"===e.tag_collection.name&&a.changeData(e.id,-1)}),Object.keys(a.props.user.teams).forEach(function(e){a.props.reduxTeamRemoveAction(a.props.user.teams[e])})},a.changeData=function(e,t){var n=a.props.communityData.filter(function(t){return!!t.tag&&(console.log(t.tag),t.tag===e)})[0];if(n){var r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}else console.log("no data stored for tag "+e)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cart-outer mb-5"},r.a.createElement("h3",{className:"center m-0 cool-font m-cart-header"},this.props.title),r.a.createElement("div",{className:"table-outer"},r.a.createElement("table",{className:"cart-table",style:{width:"100%"}},this.props.info?r.a.createElement("thead",{className:"cart-header"},r.a.createElement("tr",null,r.a.createElement("th",null,"Household"),r.a.createElement("th",null,"Action"),r.a.createElement("th",null,"Contact"),r.a.createElement("th",null,"Phone"),r.a.createElement("th",null,"Email"))):null,r.a.createElement("tbody",null,this.props.info?this.renderActionsMoreInfo(this.props.actionRels):this.renderActions(this.props.actionRels)))))}},{key:"renderActions",value:function(e){var t=this;return!e||e.length<=0?r.a.createElement("tr",{key:"1"},r.a.createElement("td",{colSpan:"100%"},r.a.createElement("p",{className:"m-0 p-2 w-100 text-center cool-font"},"Nothing here, yet! See all ",r.a.createElement(j.a,{to:this.props.links.actions}," actions ")))):Object.keys(e).map(function(a){var n=e[a],o=n.action;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(Ve,{title:"Household",text:n.real_estate_unit.name},r.a.createElement("div",{className:"column-box"},r.a.createElement("span",{className:"has-tooltip fa fa-home",style:{textAlign:"center",fontSize:"18px"}})))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement(j.a,{to:"".concat(t.props.links.actions,"/").concat(o.id)},r.a.createElement("h4",{className:"prod-title padd-top-20"},o.title)))),r.a.createElement("td",{className:"prod-column"},"todo"===n.status.toLowerCase()?r.a.createElement("div",null,r.a.createElement(Ve,{text:"Move to Done"},r.a.createElement("button",{onClick:function(){return t.moveToDone(n)},className:"done-btn has-tooltip"}," ",r.a.createElement("i",{className:"fa fa-check"})," ")),r.a.createElement(Ve,{text:"Remove from Todo"},r.a.createElement("button",{className:"remove-btn has-tooltip",onClick:function(){return t.removeFromCart(n)}}," ",r.a.createElement("i",{className:"fa fa-trash"})," "))):r.a.createElement(Ve,{text:"Oops. This action was added to done by mistake. Remove from our community's impact"},r.a.createElement("button",{className:"remove-btn has-tooltip",onClick:function(){return t.removeFromCart(n)}}," ",r.a.createElement("i",{className:"fa fa-undo"})," "))))})}},{key:"renderActionsMoreInfo",value:function(e){return!e||e.length<=0?r.a.createElement("tr",{key:"1"},r.a.createElement("td",{colSpan:"100%"},r.a.createElement("p",{className:"m-0 p-2 w-100 text-center cool-font"},"Nothing here, yet! See all ",r.a.createElement(j.a,{to:this.props.links.actions}," actions ")))):Object.keys(e).map(function(t){var a=e[t],n=a.action;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null,a.real_estate_unit.name))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement("h4",null,n.title))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},n.vendors?Object.keys(n.vendors).map(function(e){return r.a.createElement("p",null," ",n.vendors[e].name," ")}):"MassEnergize")),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},n.vendors?Object.keys(n.vendors).map(function(e){return r.a.createElement("p",null," ",r.a.createElement("p",null," ",n.vendors[e].key_contact?n.vendors[e].key_contact.phone:null," ")," ")}):"123-456-7890")),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},n.vendors?Object.keys(n.vendors).map(function(e){return r.a.createElement("p",null," ",r.a.createElement("p",null," ",n.vendors[e].key_contact?n.vendors[e].key_contact.email:null," ")," ")}):"info@massenergize.org")))})}},{key:"addToImpact",value:function(e){var t=this;this.changeDataByName("ActionsCompletedData",1),e.tags.forEach(function(e){e.tag_collection&&"Category"===e.tag_collection.name&&t.changeData(e.id,1)}),Object.keys(this.props.user.teams).forEach(function(e){t.props.reduxTeamAddAction(t.props.user.teams[e])})}},{key:"changeDataByName",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return t.name===e})[0],r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}}]),t}(r.a.Component),qe={reduxMoveToDone:P,reduxRemoveFromTodo:w,reduxRemoveFromDone:I,reduxChangeData:_e,reduxTeamAddAction:De,reduxTeamRemoveAction:Te},Je=Object(S.connect)(function(e){return{user:e.user.info,todo:e.user.todo,done:e.user.done,communityData:e.page.communityData,links:e.links}},qe)(We),Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).inCart=function(e,t,n){if(!a.props.todo)return!1;var r=a.props.todo.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)});if("TODO"===n)return r.length>0;if(!a.props.done)return!1;var o=a.props.done.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)});return"DONE"===n?o.length>0:r.length>0||o.length>0},a.moveToDone=function(e){var t={status:"DONE",action:e.action.id,real_estate_unit:e.real_estate_unit.id};B(H.USER+"/"+a.props.user.id+"/action/"+e.id,t).then(function(t){console.log(t),t.success&&(a.props.reduxMoveToDone(t.data),a.addToImpact(t.data.action),a.setState({testimonialLink:e.action.id}))}).catch(function(e){console.log(e)})},a.addToCart=function(e,t,n){var r={action:e,status:n,real_estate_unit:t};a.setState({testimonialLink:null}),console.log(a.props.user.id),B(H.USER+"/"+a.props.user.id+"/actions",r).then(function(t){console.log(t),t.success&&("TODO"===n?a.props.reduxAddToTodo(t.data):"DONE"===n&&(a.props.reduxAddToDone(t.data),a.addToImpact(t.data.action),a.setState({testimonialLink:e})))}).catch(function(e){console.log(e)})},a.state={loaded:!1,openAddForm:null,testimonialLink:null},a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"All Actions"}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"shop sec-padd"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-5 col-sm-12 col-xs-12 sidebar_styleTwo"},r.a.createElement(Ie,{tagCols:this.props.tagCols,onChange:this.handleChange}),this.props.user?r.a.createElement("div",null,this.props.todo?r.a.createElement(Je,{title:"To Do List",actionRels:this.props.todo,status:"TODO"}):null,this.props.done?r.a.createElement(Je,{title:"Completed Actions",actionRels:this.props.done,status:"DONE"}):null):r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(j.a,{to:"".concat(this.props.links.signin)}," Sign In ")," to add actions to your todo list or to mark them as complete"))),r.a.createElement("div",{className:"col-lg-8 col-md-7 col-sm-12 col-xs-12"},r.a.createElement("div",{className:"row",id:"actions-container"},this.renderActions(this.props.actions))))))))}},{key:"handleChange",value:function(){this.forceUpdate()}},{key:"renderActions",value:function(e){var t=this;return e&&0!==e.length?Object.keys(e).map(function(a){var n=e[a];return r.a.createElement(Ye,{key:a,action:n,tagCols:t.props.tagCols,match:t.props.match,user:t.props.user,addToCart:function(e,a,n){return t.addToCart(e,a,n)},inCart:function(e,a,n){return t.inCart(e,a,n)},moveToDone:function(e,a){return t.moveToDoneByActionId(e,a)},HHFormOpen:t.state.openAddForm===n.id,showTestimonialLink:t.state.testimonialLink===n.id,closeHHForm:function(){return t.setState({openAddForm:null})},openHHForm:function(e){return t.setState({openAddForm:e})}})}):r.a.createElement("p",null,"There are not any actions available in this community yet, come back later.")}},{key:"moveToDoneByActionId",value:function(e,t){console.log(e+" "+t);var a=this.props.todo.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)})[0];console.log(a),a&&this.moveToDone(a)}},{key:"addToImpact",value:function(e){var t=this;this.changeDataByName("ActionsCompletedData",1),e.tags.forEach(function(e){e.tag_collection&&"Category"===e.tag_collection.name&&t.changeData(e.id,1)}),Object.keys(this.props.user.teams).forEach(function(e){t.props.reduxTeamAddAction(t.props.user.teams[e])})}},{key:"changeDataByName",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return t.name===e})[0],r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}},{key:"changeData",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return!!t.tag&&(console.log(t.tag),t.tag===e)})[0];if(n){var r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}else console.log("no data stored for tag "+e)}}]),t}(r.a.Component),Xe={reduxAddToDone:L,reduxAddToTodo:_,reduxMoveToDone:P,reduxChangeData:_e,reduxTeamAddAction:De},Qe=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,todo:e.user.todo,done:e.user.done,actions:e.page.actions,tagCols:e.page.tagCols,pageData:e.page.actionsPage,communityData:e.page.communityData,links:e.links}},Xe)(Ke),Ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).chooseFontSize=function(){var e="16px";window.innerWidth<500&&(e="12px"),e!==a.state.fontSize&&a.setState({fontSize:e})},a.openForm=function(e){a.setState({status:e})},a.closeForm=function(){a.setState({status:null})},a.renderStories=function(e){return 0===e.length?r.a.createElement("p",null," No stories about this action yet "):r.a.createElement(r.a.Fragment,null,Object.keys(e).map(function(t){var n=e[t],o=new Date(n.created_at);if(t<a.state.numberToShow)return r.a.createElement("div",{className:"single-review-box",key:t},r.a.createElement("div",{className:"img-holder"},r.a.createElement("img",{src:"",alt:""})),r.a.createElement("div",{className:"text-holder"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"name pull-left"},r.a.createElement("h4",null,n.user.full_name," \u2013 ",o.toLocaleDateString(),":"))),r.a.createElement("div",{className:"text"},r.a.createElement("h6",null,n.title,a.state.expanded&&a.state.expanded===n.id?r.a.createElement("button",{className:"as-link",style:{float:"right"},onClick:function(){a.setState({expanded:null})}},"close"):null),r.a.createElement("p",null,a.state.expanded&&a.state.expanded===n.id?n.body:n.body.substring(0,a.state.limit),a.state.limit<n.body.length&&a.state.expanded!==n.id?r.a.createElement("button",{className:"as-link",style:{float:"right"},onClick:function(){a.setState({expanded:n.id})}},"more..."):null)),n.vendor?r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"Linked Service Provider: ",r.a.createElement(j.a,{to:"".concat(a.props.links.services,"/").concat(n.vendor.id)},n.vendor.name))):null))}))},a.inCart=function(e,t,n){if(!a.props.todo)return!1;var r=a.props.todo.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)});if("TODO"===n)return r.length>0;if(!a.props.done)return!1;var o=a.props.done.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)});return"DONE"===n?o.length>0:r.length>0||o.length>0},a.moveToDone=function(e){var t={status:"DONE",action:e.action.id,real_estate_unit:e.real_estate_unit.id};B(H.USER+"/"+a.props.user.id+"/action/"+e.id,t).then(function(e){console.log(e),e.success&&(a.props.reduxMoveToDone(e.data),a.addToImpact(e.data.action),a.setState({showTestimonialLink:!0}))}).catch(function(e){console.log(e)})},a.addToCart=function(e,t,n){var r={action:e,status:n,real_estate_unit:t};B(H.USER+"/"+a.props.user.id+"/actions",r).then(function(e){console.log(e),e.success&&("TODO"===n?a.props.reduxAddToTodo(e.data):"DONE"===n&&(a.props.reduxAddToDone(e.data),a.addToImpact(e.data.action),a.setState({showTestimonialLink:!0})))}).catch(function(e){console.log(e)})},a.state={status:null,limit:140,expanded:null,showTestimonialLink:!1,numberToShow:3,tab:"description"},a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.chooseFontSize)}},{key:"render",value:function(){var e=this;if(!this.props.actions)return r.a.createElement(ue,null);var t=this.props.actions.filter(function(t){return t.id===Number(e.props.match.params.id)})[0];return this.chooseFontSize(),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{link:this.props.links.actions,name:"All Actions"},{name:"Action ".concat(t.id)}]}),r.a.createElement("div",{className:"boxed_wrapper"},r.a.createElement("section",{className:"shop-single-area"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row",style:{paddingRight:"0px",marginRight:"0px"}},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"single-products-details"},this.renderAction(t))),this.props.user?r.a.createElement("div",{className:"col-md-4",style:{paddingRight:"0px",marginRight:"0px"}},r.a.createElement(Je,{title:"To Do List",actionRels:this.props.todo,status:"TODO",moveToDone:this.moveToDone}),r.a.createElement(Je,{title:"Completed Actions",actionRels:this.props.done,status:"DONE",moveToDone:this.moveToDone})):r.a.createElement("div",{className:"col-md-4",style:{paddingRight:"0px",marginRight:"0px"}},r.a.createElement("p",null,r.a.createElement(j.a,{to:this.props.links.signin}," Sign In ")," to add actions to your todo list or to mark them as complete")))))))}},{key:"renderAction",value:function(e){var t=this;if(!this.props.stories)return r.a.createElement(ue,null);var a=this.props.stories.filter(function(e){return e.action.id===Number(t.props.match.params.id)});return r.a.createElement("div",null,r.a.createElement("div",{className:"product-content-box"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-6 col-md-12"},r.a.createElement("div",{className:"content-box"},r.a.createElement("h2",{className:"cool-font",style:{padding:"20px 0px 0px 0px"}},e.title)),r.a.createElement("br",null),r.a.createElement("div",{className:"clearfix",style:{marginLeft:"40px"}},r.a.createElement("br",null),this.props.user?r.a.createElement("button",{className:"TODO"===this.state.status?"thm-btn action-btns cool-font style-4 selected":"thm-btn style-4 action-btns cool-font",onClick:function(){return t.openForm("TODO")}}," Add Todo "):r.a.createElement(Ve,{text:"Sign in to make a TODO list"},r.a.createElement("p",{className:"has-tooltip thm-btn style-4 disabled "},"Add Todo")),"\xa0",this.props.user?r.a.createElement("button",{className:"DONE"===this.state.status?"thm-btn style-4 selected action-btns cool-font ":"thm-btn style-4 action-btns  cool-font",onClick:function(){return t.openForm("DONE")}}," Done It "):r.a.createElement(Ve,{text:"Sign in to mark actions as completed"},r.a.createElement("p",{className:"has-tooltip thm-btn style-4 disabled"},"Done It")),this.state.status?r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement(He,{aid:e.id,status:this.state.status,open:!!this.state.status,user:this.props.user,addToCart:function(e,a,n){return t.addToCart(e,a,n)},inCart:function(e,a,n){return t.inCart(e,a,n)},moveToDone:function(e,a){return t.moveToDoneByActionId(e,a)},closeForm:this.closeForm})," "):null,this.state.showTestimonialLink?r.a.createElement("p",null,"Nice job! How was your experience with this action? Tell us about it in a ",r.a.createElement("a",{href:"#testimonials-form",className:"as-link",style:{display:"inline-block"},onClick:function(){return t.setState({tab:"testimonials"})}},"testimonial"),"."):null)),r.a.createElement("div",{className:"col-lg-6 col-md-12"},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:e.image?e.image.url:null,alt:"","data-imagezoom":"true",className:"img-responsive",style:{marginTop:"20px"}}))))),r.a.createElement("div",{className:"product-tab-box"},r.a.createElement("ul",{className:"nav nav-tabs tab-menu"},r.a.createElement("li",{id:"desctab",className:"description"===this.state.tab?"active":""},r.a.createElement("button",{className:"cool-font",style:{fontSize:this.state.fontSize},onClick:function(){t.setState({tab:"description"})},"data-toggle":"tab"},"Description")),r.a.createElement("li",{id:"stepstab",className:"steps"===this.state.tab?"active":""},r.a.createElement("button",{className:"cool-font",style:{fontSize:this.state.fontSize},onClick:function(){t.setState({tab:"steps"})},"data-toggle":"tab"},"Steps To Take")),r.a.createElement("li",{id:"reviewtab",className:"testimonials"===this.state.tab?"active":""},r.a.createElement("button",{className:"cool-font",style:{fontSize:this.state.fontSize},onClick:function(){t.setState({tab:"testimonials"})},"data-toggle":"tab"},"Testimonials"))),r.a.createElement("div",{className:"tab-content"},r.a.createElement("div",{className:"description"===this.state.tab?"tab-pane active cool-font":"tab-pane cool-font",id:"desc"},r.a.createElement("div",{className:"product-details-content"},r.a.createElement("div",{className:"desc-content-box"},r.a.createElement("p",{className:"cool-font"},e.about)))),r.a.createElement("div",{className:"steps"===this.state.tab?"tab-pane active cool-font":"tab-pane cool-font",id:"steps"},r.a.createElement("div",{className:"product-details-content"},r.a.createElement("div",{className:"desc-content-box"},r.a.createElement("p",{className:"cool-font"},e.steps_to_take)))),r.a.createElement("div",{className:"testimonials"===this.state.tab?"tab-pane active cool-font":"tab-pane cool-font",id:"review"},r.a.createElement("div",{className:"review-box"},this.renderStories(a),this.state.numberToShow<a.length?r.a.createElement("button",{style:{margin:"0 auto 30px auto"},className:"as-link",onClick:function(){return t.setState({numberToShow:a.length})}}," Show all Testimonials "):null),this.props.user?r.a.createElement("div",{id:"testimonials-form"},r.a.createElement(ze,{uid:this.props.user.id,aid:e.id,addStory:this.addStory})):r.a.createElement("p",null,r.a.createElement(j.a,{to:this.props.links.signin}," Sign In ")," to submit your own story about taking this Action")))))}},{key:"renderTags",value:function(e){return console.log(e),Object.keys(e).map(function(t){var a="";return"Category"!==e[t].tag_collection.name&&(a=e[t].tag_collection.name+"-"),r.a.createElement("span",{key:t}," ",a,r.a.createElement("i",null,e[t].name)," ")})}},{key:"handleChange",value:function(){this.forceUpdate()}},{key:"moveToDoneByActionId",value:function(e,t){var a=this.props.todo.filter(function(a){return Number(a.action.id)===Number(e)&&Number(a.real_estate_unit.id)===Number(t)})[0];a&&this.moveToDone(a)}},{key:"addToImpact",value:function(e){var t=this;this.changeDataByName("ActionsCompletedData",1),e.tags.forEach(function(e){e.tag_collection&&"Category"===e.tag_collection.name&&t.changeData(e.id,1)}),Object.keys(this.props.user.teams).forEach(function(e){t.props.reduxTeamAddAction(t.props.user.teams[e])})}},{key:"changeDataByName",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return t.name===e})[0],r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}},{key:"changeData",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return!!t.tag&&(console.log(t.tag),t.tag===e)})[0];if(n){var r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}else console.log("no data stored for tag "+e)}}]),t}(r.a.Component),$e={reduxAddToDone:L,reduxAddToTodo:_,reduxMoveToDone:P,reduxChangeData:_e,reduxTeamAddAction:De},et=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,todo:e.user.todo,done:e.user.done,actions:e.page.actions,stories:e.page.testimonials,communityData:e.page.communityData,links:e.links}},$e)(Ze),tt=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("video",{className:"width-100",controls:!0},r.a.createElement("source",{src:this.props.link,type:"video/mp4"}))}}]),t}(r.a.Component),at=a(314),nt=a.n(at),rt=(a(298),r.a.Component,function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"donate-us center p-5",style:{backgroundColor:"floralwhite"}},r.a.createElement("h2",{className:"cool-font"},this.props.donateMessage),r.a.createElement("br",null),r.a.createElement(j.a,{to:this.props.links.donate},r.a.createElement("button",{className:" thm-btn donate-box-btn action-btns"},"Donate")))}}]),t}(r.a.Component)),ot=Object(S.connect)(function(e){return{links:e.links}})(rt),st=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.pageData||!this.props.community)return r.a.createElement("p",{className:"text-center"}," Sorry, looks like this community's About Us Page is under maintenance. Try again later ");if(!this.props.communityAdmins)return U(H.COMMUNITY_ADMIN_GROUP+this.props.community.id).then(function(t){t.success&&t.data&&e.props.reduxLoadCommunityAdmins(t.data.members)}),r.a.createElement(ue,null);G(this.props.pageData.sections,"WelcomeImages",!0).slider[0].slides;var t=G(this.props.pageData.sections,"AboutUsVideo",!0),a=t.image?t.image.url:null,n=G(this.props.pageData.sections,"AboutUsDescription",!0).description,o=G(this.props.pageData.sections,"DonateBar",!0).description;this.props.communityAdmins;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"About Us"}]}),r.a.createElement("div",{className:"col-md-10 col-lg-10 offset-md-1 col-sm-10 col-xs-12"},r.a.createElement("div",{style:{marginTop:70}}),r.a.createElement("div",{className:" col-sm-12 col-md-10 offset-md-1 mass-energize-about"},r.a.createElement("center",null,r.a.createElement("h3",{className:"cool-font",style:{padding:20}},"About MassEnergize")),r.a.createElement("p",{className:"cool-font"},"Duis ullamco exercitation incididunt irure. Excepteur sint labore amet fugiat ullamco sint cillum culpa sint ad qui est. Nisi sint irure fugiat elit magna consectetur. Voluptate esse nostrud est nostrud ullamco ut mollit irure do ipsum aliquip mollit reprehenderit. Amet non ipsum aute ex deserunt nostrud ut aute do. Qui dolore occaecat cupidatat sit veniam excepteur occaecat officia enim.")),r.a.createElement("div",{className:a?"col-sm-12 col-md-10 offset-md-1":"d-none"},r.a.createElement("center",null,r.a.createElement("h3",{className:"cool-font",style:{padding:20}},"About ",this.props.community.name," Community")),r.a.createElement(tt,{link:a}),r.a.createElement("div",{className:"community-about-text cool-font",dangerouslySetInnerHTML:{__html:n}}))),r.a.createElement(ot,{donateMessage:o}))}}]),t}(r.a.Component),lt=Object(S.connect)(function(e){return{community:e.page.community,communityAdmins:e.page.communityAdmins,pageData:e.page.aboutUsPage}},{reduxLoadCommunityAdmins:function(e){return function(t){return t({type:"LOAD_COMMUNITY_ADMINS",payload:e})}}})(st),ct=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.serviceProviders;return e&&0!==e.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Service Providers"}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row pt-3 pb-3"},this.renderVendors(e))))):r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null," Looks like your community hasn't partnered with any service providers yet.  Try again later"))}},{key:"renderVendors",value:function(e){var t=this;return e&&0!==e.length?e.map(function(e){return r.a.createElement("div",{className:"col-12 col-md-6 col-lg-4",key:e.vendor},r.a.createElement("div",{className:"card rounded-0 spacing"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement(j.a,{to:"".concat(t.props.links.services,"/").concat(e.id)},r.a.createElement("img",{className:"w-100",src:e.logo.url,alt:e.name})),r.a.createElement(j.a,{to:"".concat(t.props.links.services,"/").concat(e.id)},r.a.createElement("h3",{className:"pt-3"},e.name))),r.a.createElement("div",{className:"col-12 mt-3"},r.a.createElement("span",null,r.a.createElement("b",null,"Services")),r.a.createElement("ul",{className:"normal"},e.services.map(function(t){return r.a.createElement("li",{key:e.name+"-"+t.id},t.name)}))),e.address?r.a.createElement("div",{className:"w-100 p-2 bg-dark text-white text-center justify-content-center"},r.a.createElement("span",{className:"fa fa-map-pin"})," ",e.address.city,", ",e.address.state):null,null!=e.key_contact?r.a.createElement("div",{className:"w-100 p-2 text-center"},e.user_info?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"//"+e.key_contact.user_info.website,target:"_blank",rel:"noopener noreferrer",className:"font-normal mr-3"},r.a.createElement("span",{className:"fa fa-link fa-2x"})),r.a.createElement("a",{href:"mail://"+e.key_contact.email,className:"font-normal ml-3"},r.a.createElement("span",{className:"fa fa-envelope fa-2x"}))):null):null)))}):r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null," Looks like your community hasn't partnered with any vendors yet.  Try again later"))}}]),t}(r.a.Component),it=Object(S.connect)(function(e){return{serviceProviders:e.page.serviceProviders,links:e.links}},null)(ct),ut=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).renderStories=function(e){return 0===e.length?r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null," No stories about this Service Provider yet ")):r.a.createElement(r.a.Fragment,null,Object.keys(e).map(function(t){var n=e[t],o=new Date(n.created_at);return r.a.createElement("div",{className:"single-review-box",key:t,style:{padding:0}},r.a.createElement("div",{className:"img-holder"},r.a.createElement("img",{src:"",alt:""})),r.a.createElement("div",{className:"text-holder"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"name pull-left"},r.a.createElement("h4",null,n.user.full_name," \u2013 ",o.toLocaleDateString(),":"))),r.a.createElement("div",{className:"text"},r.a.createElement("h6",null,n.title,a.state.expanded&&a.state.expanded===n.id?r.a.createElement("button",{className:"as-link",style:{float:"right"},onClick:function(){a.setState({expanded:null})}},"close"):null),r.a.createElement("p",null,a.state.expanded&&a.state.expanded===n.id?n.body:n.body.substring(0,a.state.limit),a.state.limit<n.body.length&&a.state.expanded!==n.id?r.a.createElement("button",{className:"as-link",style:{float:"right"},onClick:function(){a.setState({expanded:n.id})}},"...more"):null)),n.action?r.a.createElement("div",{className:"text"},r.a.createElement("p",null,"Linked Action: ",r.a.createElement(j.a,{to:"".concat(a.props.links.actions,"/").concat(n.action.id)},n.action.title))):null))}))},a.state={status:null,limit:140,expanded:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.serviceProviders||!this.props.testimonials)return r.a.createElement(ue,null);var t=this.props.serviceProviders.filter(function(t){return t.id===Number(e.props.match.params.id)})[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Service Providers",link:this.props.links.services},{name:"Service Provider ".concat(t.id)}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row pt-3 pb-3"},this.renderVendor(t)))))}},{key:"renderVendor",value:function(e){var t=this,a=this.props.testimonials.filter(function(e){return e.vendor&&e.vendor.id===Number(t.props.match.params.id)});return r.a.createElement("div",{className:"col-12",key:e.vendor},r.a.createElement("div",{className:"card rounded-0 spacing"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 col-12 text-center"},r.a.createElement("img",{className:"w-100",src:e.logo.url,alt:e.name}),e.address?r.a.createElement("div",{className:"w-100 p-2 bg-dark text-white text-center justify-content-center"},r.a.createElement("span",{className:"fa fa-map-pin"})," ",e.address.city,", ",e.address.state):null),r.a.createElement("div",{className:"col-md-7 col-12 mt-3"},r.a.createElement("h1",{className:"pt-3"},e.name),r.a.createElement("p",null,"\xa0\xa0\xa0\xa0",e.description)),e.services&&e.services.length>0?r.a.createElement("div",{className:"col-12"},r.a.createElement("span",null,r.a.createElement("h4",null,"Services")),r.a.createElement("ul",{className:"normal"},e.services.map(function(t){return r.a.createElement("li",{style:{display:"inline-block"},key:e.name+"-"+t.id},r.a.createElement("b",null,t.name),"\xa0\xa0\xa0",r.a.createElement("p",null,t.description))}))):null),null!=e.key_contact?r.a.createElement("div",{className:"w-100 p-2 text-center"},e.user_info?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"//"+e.key_contact.user_info.website,target:"_blank",rel:"noopener noreferrer",className:"font-normal mr-3"},r.a.createElement("span",{className:"fa fa-link fa-2x"})),r.a.createElement("a",{href:"mail://"+e.key_contact.email,className:"font-normal ml-3"},r.a.createElement("span",{className:"fa fa-envelope fa-2x"}))):null):null,r.a.createElement("br",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("h4",{style:{background:"#003000",color:"white"}}," Testimonials about this Service Provider ")),this.renderStories(a),r.a.createElement(ze,{vid:e.id}))))}}]),t}(r.a.Component),mt=Object(S.connect)(function(e){return{serviceProviders:e.page.serviceProviders,testimonials:e.page.testimonials,links:e.links}},null)(ut),dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={limit:140,expanded:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.stories;return null==e?r.a.createElement(ue,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Testimonials"}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:90}},r.a.createElement("section",{className:"testimonial2"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row masonary-layout"},this.renderStories(e)),r.a.createElement("div",{className:"col-12 "},this.props.user?r.a.createElement(ze,{uid:this.props.user.id}):r.a.createElement("p",{className:"text-center"},r.a.createElement(j.a,{to:this.props.links.signin},"Sign in")," to submit a story"))))))}},{key:"renderStories",value:function(e){var t=this;return 0===e.length?r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("p",{className:"cool-font"}," There are not any testimonials yet.  If you have a story to tell, let us know in the form below")):e.map(function(e){var a="col-md-4 col-sm-6 col-xs-12";return null!==t.state.expanded&&(a=t.state.expanded===e.id?"col-12":"d-none"),r.a.createElement("div",{className:a},r.a.createElement("div",{className:"item center",style:{padding:30}},r.a.createElement("div",{className:"quote"},r.a.createElement("i",{className:"fa fa-quote-left"})),r.a.createElement("h4",{className:"title p-2 cool-font"},e.title),t.state.expanded&&t.state.expanded===e.id?r.a.createElement("button",{className:"as-link",style:{width:"100%",margin:"auto"},onClick:function(){t.setState({expanded:null})}},"close"):null,r.a.createElement("p",{className:"p-1 text-center cool-font"},t.state.expanded&&t.state.expanded===e.id?e.body:e.body.substring(0,Oe.LIMIT),(!t.state.expanded||!t.state.expanded===e.id)&&Oe.LIMIT<e.body.length?r.a.createElement("button",{className:"as-link",style:{width:"100%",margin:"auto"},onClick:function(){t.setState({expanded:e.id})}},"..."):null),r.a.createElement("div",{className:"author cool-font"},r.a.createElement("h5",{className:"cool-font"},e.user.full_name)),e.action?r.a.createElement("p",null,r.a.createElement(j.a,{to:"".concat(t.props.links.actions,"/").concat(e.action.id),className:"cool-font"},r.a.createElement("u",null,e.action.title))):null))})}}]),t}(r.a.Component),pt=Object(S.connect)(function(e){return{stories:e.page.testimonials,user:e.user.info,links:e.links}},null)(dt),ht=a(52),ft=a(101),Et=a.n(ft);a(572);Et.a.initializeApp({apiKey:"AIzaSyBjcwjC_0H1bgGKqPyqKnbWaGmAtzc4BJQ",authDomain:"massenergize-auth.firebaseapp.com",databaseURL:"https://massenergize-auth.firebaseio.com",projectId:"massenergize-auth",storageBucket:"",messagingSenderId:"72842344535",appId:"1:72842344535:web:9b1517b1b3d2e818"});var vt=Et.a,gt=new Et.a.auth.GoogleAuthProvider,bt=new Et.a.auth.FacebookAuthProvider,yt={email:"",password:"",error:null},Ot=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).forgotPassword=function(){""!==a.state.email?a.props.firebase.auth().sendPasswordResetEmail(a.state.email).then(function(e){alert("Please check your email...")}).catch(function(e){console.log(e)}):a.setState({error:"Enter your email to reset your password"})},a.signInWithGoogle=function(){a.props.firebase.auth().setPersistence(a.state.persistence).then(function(){a.props.firebase.auth().signInWithPopup(gt).then(function(e){console.log(e),a.fetchAndLogin(e.user.email).then(function(e){e&&console.log("yay")}),a.setState(Object(g.a)({},yt))}).catch(function(e){console.log(e),a.setState({error:e.message})})})},a.signInWithFacebook=function(){a.props.firebase.auth().setPersistence(a.state.persistence).then(function(){a.props.firebase.auth().signInWithPopup(bt).then(function(e){a.fetchAndLogin(e.user.email).then(function(e){e&&console.log("yay")}),a.setState(Object(g.a)({},yt))}).catch(function(e){a.setState({error:e.message})})})},a.fetchAndLogin=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.props.tryingToLogin(!0),e.next=4,U("".concat(H.USER,"/e/").concat(t));case 4:if(!(n=e.sent).success||!n.data){e.next=17;break}return a.props.reduxLogin(n.data),e.next=9,U("".concat(H.USER,"/e/").concat(t,"/actions?status=TODO"));case 9:return r=e.sent,a.props.reduxLoadTodo(r.data),e.next=13,U("".concat(H.USER,"/e/").concat(t,"/actions?status=DONE"));case 13:return o=e.sent,a.props.reduxLoadDone(o.data),a.props.tryingToLogin(!1),e.abrupt("return",!0);case 17:return console.log("fetch and login failed"),a.props.tryingToLogin(!1),e.abrupt("return",!1);case 22:return e.prev=22,e.t0=e.catch(0),console.log(e.t0),a.props.tryingToLogin(!1),e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,null,[[0,22]])}));return function(t){return e.apply(this,arguments)}}(),a.state=Object(g.a)({},yt,{persistence:e.firebase.auth.Auth.Persistence.SESSION}),a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a.isInvalid=a.isInvalid.bind(Object(b.a)(Object(b.a)(a))),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error;return r.a.createElement("div",{className:"styled-form login-form"},r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("h3",null,"Sign in")),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-envelope-o"})),r.a.createElement("input",{type:"email",name:"email",value:t,onChange:this.onChange,placeholder:"Enter email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-unlock-alt"})),r.a.createElement("input",{type:"password",name:"password",value:a,onChange:this.onChange,placeholder:"Enter Password"})),n&&r.a.createElement("p",{style:{color:"red"}}," ",n," "),r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"form-group pull-left"},r.a.createElement("button",{type:"submit",disabled:this.isInvalid(),className:"thm-btn"},"Sign in")),r.a.createElement("div",{className:"form-group social-links-two padd-top-5 pull-right"},"Or sign in with",r.a.createElement("button",{onClick:this.signInWithFacebook,id:"facebook",type:"button",className:"img-circle facebook"},r.a.createElement("span",{className:"fa fa-facebook-f"})),r.a.createElement("button",{onClick:this.signInWithGoogle,id:"google",type:"button",className:"img-circle google"},r.a.createElement("span",{className:"fa fa-google"}))))),r.a.createElement("p",null,r.a.createElement("button",{className:"as-link",onClick:this.forgotPassword}," Forgot Password ")),r.a.createElement("p",null," Don't have an account? ",r.a.createElement(j.a,{to:this.props.links.signup},"Register Here")," "))}},{key:"isInvalid",value:function(){var e=this.state,t=e.password,a=e.email;return""===t||""===a}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t))}},{key:"onSubmit",value:function(e){var t=this;this.props.firebase.auth().setPersistence(this.state.persistence).then(function(){t.props.firebase.auth().signInWithEmailAndPassword(t.state.email,t.state.password).then(function(e){console.log(e.user),t.fetchAndLogin(e.user.email).then(function(e){e&&console.log("yay")}),t.setState(Object(g.a)({},yt))}).catch(function(e){t.setState({error:e.message})})}),e.preventDefault()}}]),t}(r.a.Component),Nt=Object(ht.d)(C.withFirebase)(Ot),kt=Object(S.connect)(function(e){return{auth:e.firebase.auth,links:e.links}},{reduxLogin:x,reduxLoadDone:A,reduxLoadTodo:T})(Nt),jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={tryingToLogin:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.state.tryingToLogin){if(this.props.user.info)return r.a.createElement(d.Redirect,{to:this.props.links.profile});if(this.props.auth.isLoaded&&!this.props.auth.isEmpty)return r.a.createElement(d.Redirect,{to:this.props.links.signup})}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Sign In"}]}),r.a.createElement("div",{className:"boxed_wrapper"},r.a.createElement("section",{className:"register-section sec-padd-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-column column col-md-6 col-12 offset-md-3"},r.a.createElement(kt,{tryingToLogin:function(t){return e.setState({tryingToLogin:t})}})))))))}}]),t}(r.a.Component),St=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user,links:e.links}})(jt),Ct=(a(574),a(575),{value:"--",oldvalue:"--"}),xt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){"--"===a.state.oldvalue?a.addRSVP(a.state.value):"--"===a.state.value?a.removeRSVP(a.state.value):a.changeRSVP(a.state.value),a.setState({oldvalue:a.state.value})},a.addRSVP=function(e){var t={status:e,attendee:a.props.userid,event:a.props.eventid};B(H.EVENT_ATTENDEES,t).then(function(e){console.log(e),e.success&&e.data&&a.props.reduxAddRSVP(e.data)})},a.changeRSVP=function(e){var t={status:e,attendee:a.props.userid,event:a.props.eventid};B("".concat(H.EVENT_ATTENDEE,"/").concat(a.props.rsvp.id),t).then(function(e){console.log(e),e.success&&e.data&&a.props.reduxChangeRSVP(e.data)})},a.removeRSVP=function(){z("".concat(H.EVENT_ATTENDEE,"/").concat(a.props.rsvp.id)).then(function(e){console.log(e),e.success&&a.props.reduxRemoveRSVP(a.props.rsvp)})},a.onSubmit=function(e){e.preventDefault();var t={name:a.state.name,unit_type:a.state.unittype,location:a.state.location},n=H.USER+"/"+a.props.user.id+"/households";a.props.householdID&&(n=H.HOUSEHOLD+"/"+a.props.householdID),B(n,t).then(function(e){if(console.log(e),e.success)if(a.props.householdID)a.props.editHousehold(e.data),a.props.closeForm();else{a.props.addHousehold(e.data);var t=[];a.props.user.households.forEach(function(e){t.push(e.id)}),fetch(H.USER+"/"+a.props.user.id,{method:"post",body:JSON.stringify({preferred_name:a.props.user.preferred_name,email:a.props.user.email,full_name:a.props.user.full_name,real_estate_units:[].concat(t)})}).then(function(e){return e.json()}).then(function(e){console.log(e),e.success&&a.props.closeForm()})}}).catch(function(e){console.log(e)})},a.state={value:e.rsvp?e.rsvp.status:Ct.value,oldvalue:e.rsvp?e.rsvp.status:Ct.oldvalue},a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.noText?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{style:{display:"inline-block"}}," RSVP "),"\xa0"),r.a.createElement("select",{value:this.state.value,onChange:this.onChange},r.a.createElement("option",{value:"--"},"--"),r.a.createElement("option",{value:"INTERESTED"},"Interested"),r.a.createElement("option",{value:"RSVP"},"Going"),r.a.createElement("option",{value:"SAVE"},"Save For Later")),"\xa0",this.state.oldvalue!==this.state.value?r.a.createElement("button",{className:"thm-btn style-4",onClick:this.handleSubmit},"Submit"):null)}},{key:"onChange",value:function(e){this.setState({value:e.target.value})}}]),t}(r.a.Component),Dt={reduxAddRSVP:function(e){return function(t){return t({type:"ADD_RSVP",payload:e})}},reduxRemoveRSVP:function(e){return function(t){return t({type:"REMOVE_RSVP",payload:e})}},reduxChangeRSVP:function(e){return function(t){return t({type:"CHANGE_RSVP",payload:e})}}},Tt=Object(S.connect)(null,Dt)(xt),_t=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).renderCategoryFilter=function(){return a.state.events_search_toggled?r.a.createElement("div",null,r.a.createElement("div",{className:"tabs-outer"},r.a.createElement("div",{className:"tabs-box tabs-style-one"},r.a.createElement("form",{className:"tab-buttons"},r.a.createElement("div",{className:"tab-btn"},r.a.createElement("input",{type:"radio",name:"tabs",id:"show-all-button",defaultChecked:!0,onClick:a.resetDates})," All"),r.a.createElement("div",{className:"tab-btn"},r.a.createElement("input",{type:"radio",name:"tabs",id:"show-upcoming-button",onClick:a.resetDates})," Upcoming")),r.a.createElement("div",{className:"tabs-content"},r.a.createElement("div",{className:"tab active-tab",id:"tab-two",style:{display:"block"}},r.a.createElement("div",{className:"default-form-area all"}))))),r.a.createElement(Ie,{tagCols:a.props.tagCols,onChange:a.handleChange})):r.a.createElement("div",null)},a.toggleFilter=function(){var e=a.state.events_search_toggled;a.setState({events_search_toggled:!e})},a.state={events_search_toggled:!1,startDate:null,endDate:null,userData:null},a.selectStartDate=a.selectStartDate.bind(Object(b.a)(Object(b.a)(a))),a.selectEndDate=a.selectEndDate.bind(Object(b.a)(Object(b.a)(a))),a.handleChange=a.handleChange.bind(Object(b.a)(Object(b.a)(a))),a.resetDates=a.resetDates.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Events"}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"boxed-wrapper"},r.a.createElement("section",{className:"eventlist"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-4 col-md-5 col-12"},this.props.tagCols?this.renderSideBar():r.a.createElement(ue,null)),r.a.createElement("div",{className:"col-lg-8 col-md-7 col-12"},r.a.createElement("div",{className:"outer-box sec-padd event-style2"},this.renderEvents(this.props.events)))))))))}},{key:"renderEvents",value:function(e){var t=this;if(!this.props.events||0===this.props.events.length)return r.a.createElement("div",{className:"text-center"},r.a.createElement("p",{className:"cool-font"}," Sorry, looks like there are no upcoming events in your community "));var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date;return Object.keys(e).map(function(t){return e[t]}).sort(function(e,t){var a=new Date(e.start_date_and_time),r=new Date(e.end_date_and_time),o=new Date(t.start_date_and_time),s=new Date(t.end_date_and_time);return(a-n>0||r-n>0)&&(o-n>0||s-n>0)?a-o:o-n-(a-n)}).map(function(e){var o=new Date(e.start_date_and_time),s=new Date(e.end_date_and_time);return t.shouldRender(e)?r.a.createElement("div",{className:"item style-1 clearfix m-action-item",onClick:function(){window.location="".concat(t.props.links.events+"/"+e.id)},key:e.id},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-lg-4 col-12"},r.a.createElement("figure",{className:"img-holder"},r.a.createElement(j.a,{to:t.props.links.events+"/"+e.id},r.a.createElement("img",{src:e.image?e.image.url:null,alt:""})),r.a.createElement("div",{className:s-n>0?"date":"date old"},r.a.createElement("span",null,a[o.getMonth()],r.a.createElement("br",null),o.getDate())))),r.a.createElement("div",{className:" col-lg-8 col-12 "},r.a.createElement("div",{className:"lower-content "},r.a.createElement(j.a,{className:"cool-font",to:t.props.links.events+"/"+e.id},r.a.createElement("h4",{className:"cool-font"}," ",e.name," ")),r.a.createElement("div",{className:"text"},e.description.length<Oe.BIG_LIMIT?r.a.createElement("p",{className:"cool-font"}," ",e.description," "):r.a.createElement("p",{className:"cool-font"},e.description.substring(0,Oe.BIG_LIMIT),"\xa0",r.a.createElement(j.a,{to:"".concat(t.props.links.events,"/").concat(e.id)}," ...more"))),s-n>0?r.a.createElement(r.a.Fragment,null,t.props.user?r.a.createElement(Tt,{eventid:e.id,userid:t.props.user.id,rsvp:t.userRSVP(e.id)}):r.a.createElement("p",null,r.a.createElement(j.a,{className:"cool-font",to:t.props.links.signin},"Sign In")," to RSVP to events")):null)),r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"post-meta list_inline"},t.sameDay(o,s)?r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-clock-o"})," ",o.toLocaleString()," - ",s.toLocaleTimeString()):r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-clock-o"})," ",o.toLocaleString()," - ",s.toLocaleString()),e.location?r.a.createElement("li",null,"\xa0|\xa0\xa0\xa0",r.a.createElement("i",{className:"fa fa-map-marker"}),e.location.street+", "+e.location.city+" "+e.location.state):null)))):null})}},{key:"userRSVP",value:function(e){var t=this;if(!this.props.user||!this.props.eventRSVPs)return null;var a=this.props.eventRSVPs.filter(function(a){return a.attendee.id===t.props.user.id&&a.event.id===e});return a.length<1?null:a[0]}},{key:"sameDay",value:function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},{key:"selectStartDate",value:function(e){this.setState({startDate:e}),this.state.endDate&&e>this.state.endDate&&this.setState({endDate:null}),document.getElementById("show-all-button").checked=!1,document.getElementById("show-upcoming-button").checked=!1}},{key:"selectEndDate",value:function(e){this.setState({endDate:e}),document.getElementById("show-all-button").checked=!1,document.getElementById("show-upcoming-button").checked=!1}},{key:"shouldRender",value:function(e){var t=new Date(e.start_date_and_time),a=new Date(e.end_date_and_time);if(!this.searchFits(e.name)&&!this.searchFits(e.description))return!1;if(!this.showButtonFits(t,a))return!1;if(!this.dateFits(t,a))return!1;var n=new Set;for(var r in e.tags.forEach(function(e){n.add(e.id)}),this.props.tagsCols){var o=this.props.tagCols[r];if(!this.filterFits(o.tags,n))return!1}return!0}},{key:"searchFits",value:function(e){var t=document.getElementById("action-searchbar");return!t||(""===t.value||!!e.toLowerCase().includes(t.value.toLowerCase()))}},{key:"showButtonFits",value:function(e,t){var a=new Date,n=document.getElementById("show-all-button"),r=document.getElementById("show-upcoming-button");return!n||!r||(!((r.checked||n.checked)&&!n.checked)||!!r.checked&&(e-a>0||t-a>0))}},{key:"dateFits",value:function(e,t){return!this.state.startDate&&!this.state.endDate||(this.state.endDate?this.state.startDate?t>=this.state.startDate&&t<=this.state.endDate.setHours(23,59,59,99):t<=this.state.endDate.setHours(23,59,59,99):e>=this.state.startDate)}},{key:"filterFits",value:function(e,t){var a=!0;for(var n in e){var r=document.getElementById("filtertag"+e[n].id);if(r&&r.checked&&(a=!1,t.has(e[n].id)))return!0}return a}},{key:"renderSideBar",value:function(){var e=this;return r.a.createElement("div",{className:"blog-sidebar sec-padd"},r.a.createElement("div",{className:"event-filter"},r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("div",{className:"sidebar_search",style:{margin:0}},r.a.createElement("form",{action:"#"},r.a.createElement("input",{type:"text",placeholder:"Search....",id:"action-searchbar"}),r.a.createElement("button",{className:"tran3s color1_bg"},r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})))),r.a.createElement("p",{className:"toggle-filter-button",onClick:function(){e.toggleFilter()}},"Event Filter")),this.renderCategoryFilter()))}},{key:"handleChange",value:function(){this.forceUpdate()}},{key:"resetDates",value:function(){this.setState({endDate:null,startDate:null}),this.forceUpdate()}}]),t}(r.a.Component),wt=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,events:e.page.events,eventRSVPs:e.page.rsvps,links:e.links,tagCols:e.page.tagCols?e.page.tagCols.filter(function(e){return"Category"===e.name}):null}},null)(_t),At=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.events)return r.a.createElement(ue,null);var t=this.props.events.filter(function(t){return t.id===Number(e.props.match.params.id)})[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{link:this.props.links.events,name:"Events"},{name:"Event ".concat(t.id)}]}),r.a.createElement("div",{className:"boxed_wrapper",style:{marginTop:50}},r.a.createElement("section",{className:"shop-single-area"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"single-products-details"},this.renderEvent(t))))))}},{key:"renderEvent",value:function(e){if(!e)return r.a.createElement("div",null," ...oops couldn't find event with id: ",this.props.match.params.id);var t=new Date(e.start_date_and_time),a=new Date(e.end_date_and_time);return r.a.createElement("section",{className:"event-section style-3"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"single-event sec-padd"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:e.image?e.image.url:null,alt:""}))),r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"text"},r.a.createElement("h3",{className:"cool-font"},e.name),r.a.createElement("p",{className:"cool-font"},e.description),r.a.createElement("br",null),r.a.createElement("p",{className:"cool-font"},e.moreinfo)))),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"event-timeline"},r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("h3",null,"Event Schedule")),r.a.createElement("ul",null,r.a.createElement("li",{key:"time"},r.a.createElement("i",{className:"fa fa-clock-o"}),r.a.createElement("b",null,"Date:"),t.toLocaleString(),r.a.createElement("b",null," - "),a.toLocaleString()),e.location?r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-map-marker"}),r.a.createElement("b",null,"Venue:")," ",e.location.street+", "+e.location.city+" "+e.location.state):null))),e.details?r.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("h3",null,"Event Details")),r.a.createElement("ul",{className:"list2"},this.renderDetails(e.details))):null)))))}},{key:"renderDetails",value:function(e){return Object.keys(e).map(function(t){return r.a.createElement("li",{key:t},r.a.createElement("i",{className:"fa fa-check-circle"}),e[t])})}}]),t}(r.a.Component),Lt=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,events:e.page.events,links:e.links}},null)(At),It=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){a.props.firebase.auth().signOut(),a.props.reduxLogout()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{className:"thm-btn red",type:"button",onClick:this.onClick},"Sign Out")}}]),t}(r.a.Component),Pt=(Object(S.connect)(null,{reduxLogout:D})(Object(C.withFirebase)(It)),a(330)),Rt=a.n(Pt),Mt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={speed:3e3,count:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"item"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"icon"},r.a.createElement("i",{className:this.props.icon})),r.a.createElement("div",{className:"count-outer"},r.a.createElement(Rt.a,{end:this.props.end,duration:3})),r.a.createElement("h4",{className:"counter-title"},this.props.title))}}]),t}(r.a.Component),Ft={name:"",unittype:"RESIDENTIAL",location:""},Vt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault();var t=a.state.address+", "+a.state.city+", "+a.state.state,n={name:a.state.name,unit_type:a.state.unittype,location:t},r=H.USER+"/"+a.props.user.id+"/households";a.props.householdID&&(r=H.HOUSEHOLD+"/"+a.props.householdID),B(r,n).then(function(e){console.log(e),e.success&&(a.props.householdID?(a.props.editHousehold(e.data),a.props.closeForm()):(a.props.addHousehold(e.data),B(H.USER+"/"+a.props.user.id,{real_estate_units:e.data.id}).then(function(e){e.success&&a.props.closeForm()})))}).catch(function(e){console.log(e)})};var n="",r="",o="MA";if(e.location&&""!=e.location){var s=e.location.split(", ");n=s[0],r=s[1],o=s[2]}return a.state={name:e.name?e.name:Ft.name,unittype:e.unittype?e.unittype:Ft.unittype,address:n,city:r,state:o},a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onSubmit,className:"householdForm"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Name ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.onChange,required:!0})),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Type"),r.a.createElement("div",{className:"col-6 d-flex"},r.a.createElement("input",{type:"radio",name:"unittype",id:"unit_residential",value:"RESIDENTIAL",checked:"RESIDENTIAL"===this.state.unittype,onChange:this.onChange}),r.a.createElement("label",{htmlFor:"unit_residential",className:"ml-2",value:"unit_residential"},"Residential")),r.a.createElement("div",{className:"col-6 d-flex"},r.a.createElement("input",{type:"radio",name:"unittype",id:"unit_commercial",value:"COMMERCIAL",checked:"COMMERCIAL"===this.state.unittype,onChange:this.onChange}),r.a.createElement("label",{htmlFor:"unit_commercial",className:"ml-2",value:"unit_commercial"},"Commercial"))),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Street Address"),r.a.createElement("input",{type:"text",name:"address",value:this.state.address?this.state.address:"",onChange:this.onChange})),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"City / Town"),r.a.createElement("input",{type:"text",name:"city",value:this.state.city?this.state.city:"",onChange:this.onChange})),r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"State"),r.a.createElement("select",{value:this.state.state,onChange:function(t){return e.setState({state:t.target.value})}},r.a.createElement("option",{value:""},"--"),r.a.createElement("option",{value:"AL"},"Alabama"),r.a.createElement("option",{value:"AK"},"Alaska"),r.a.createElement("option",{value:"AZ"},"Arizona"),r.a.createElement("option",{value:"AR"},"Arkansas"),r.a.createElement("option",{value:"CA"},"California"),r.a.createElement("option",{value:"CO"},"Colorado"),r.a.createElement("option",{value:"CT"},"Connecticut"),r.a.createElement("option",{value:"DE"},"Delaware"),r.a.createElement("option",{value:"DC"},"Washington, D.C."),r.a.createElement("option",{value:"FL"},"Florida"),r.a.createElement("option",{value:"GA"},"Georgia"),r.a.createElement("option",{value:"HI"},"Hawaii"),r.a.createElement("option",{value:"ID"},"Idaho"),r.a.createElement("option",{value:"IL"},"Illinois"),r.a.createElement("option",{value:"IN"},"Indiana"),r.a.createElement("option",{value:"IA"},"Iowa"),r.a.createElement("option",{value:"KS"},"Kansas"),r.a.createElement("option",{value:"KY"},"Kentucky"),r.a.createElement("option",{value:"LA"},"Louisiana"),r.a.createElement("option",{value:"ME"},"Maine"),r.a.createElement("option",{value:"MD"},"Maryland"),r.a.createElement("option",{value:"MA"},"Massachusetts"),r.a.createElement("option",{value:"MI"},"Michigan"),r.a.createElement("option",{value:"MN"},"Minnesota"),r.a.createElement("option",{value:"MS"},"Mississippi"),r.a.createElement("option",{value:"MO"},"Missouri"),r.a.createElement("option",{value:"MT"},"Montana"),r.a.createElement("option",{value:"NE"},"Nebraska"),r.a.createElement("option",{value:"NV"},"Nevada"),r.a.createElement("option",{value:"NH"},"New Hampshire"),r.a.createElement("option",{value:"NJ"},"New Jersey"),r.a.createElement("option",{value:"NM"},"New Mexico"),r.a.createElement("option",{value:"NY"},"New York"),r.a.createElement("option",{value:"NC"},"North Carolina"),r.a.createElement("option",{value:"ND"},"North Dakota"),r.a.createElement("option",{value:"OH"},"Ohio"),r.a.createElement("option",{value:"OK"},"Oklahoma"),r.a.createElement("option",{value:"OR"},"Oregon"),r.a.createElement("option",{value:"PA"},"Pennsylvania"),r.a.createElement("option",{value:"RI"},"Rhode Island"),r.a.createElement("option",{value:"SC"},"South Carolina"),r.a.createElement("option",{value:"SD"},"South Dakota"),r.a.createElement("option",{value:"TN"},"Tennessee"),r.a.createElement("option",{value:"TX"},"Texas"),r.a.createElement("option",{value:"UT"},"Utah"),r.a.createElement("option",{value:"VT"},"Vermont"),r.a.createElement("option",{value:"VA"},"Virginia"),r.a.createElement("option",{value:"WA"},"Washington"),r.a.createElement("option",{value:"WV"},"West Virginia"),r.a.createElement("option",{value:"WI"},"Wisconsin"),r.a.createElement("option",{value:"WY"},"Wyoming"))),r.a.createElement("div",{className:"col p-0"},r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit",style:{width:"99%"}},this.props.householdID?"Submit Changes":"Add household")))}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t)),console.log(this.state.unittype)}}]),t}(r.a.Component),Ht=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){if(e.preventDefault(),a.state.delete_account&&a.state.are_you_sure)a.deleteAccount();else{var t={full_name:a.state.full_name,preferred_name:a.state.preferred_name},n=H.USER+"/"+a.props.user.id;B(n,t).then(function(e){console.log(e),e.success&&e.data&&(a.props.reduxLogin(e.data),a.props.closeForm())}).catch(function(e){console.log(e)})}},a.state={full_name:e.full_name?e.full_name:"",preferred_name:e.preferred_name?e.preferred_name:"",delete_account:!1,change_password:!1,are_you_sure:!1},a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onSubmit},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("input",{type:"text",name:"full_name",value:this.state.full_name,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"Full Name ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("input",{type:"text",name:"preferred_name",value:this.state.preferred_name,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"Preferred Name ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit"},"Submit"),r.a.createElement("button",{className:"thm-btn red",type:"button",onClick:function(){return e.props.closeForm()}}," Cancel "))}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t)),console.log(this.state.unittype)}},{key:"deleteAccount",value:function(){this.setState({error:"Sorry, we don't support deleting accounts yet"})}}]),t}(r.a.Component),Ut=Object(S.connect)(function(e){return{user:e.user.info,auth:e.firebase.auth}},{reduxLogin:x})(Ht),Bt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).sameDay=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cart-outer mb-5"},r.a.createElement("h3",{className:"center m-0"},this.props.title),r.a.createElement("div",{className:"table-outer"},r.a.createElement("table",{className:"cart-table",style:{width:"100%"}},this.props.info?r.a.createElement("thead",{className:"cart-header"},r.a.createElement("tr",null,r.a.createElement("th",null,"Event"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Status"))):null,r.a.createElement("tbody",null,this.props.info?this.renderEventsMoreInfo(this.props.eventRSVPs):this.renderEvents(this.props.eventRSVPs)))))}},{key:"renderEvents",value:function(e){var t=this;return!e||e.length<=0?r.a.createElement("tr",{key:"1"},r.a.createElement("td",{colSpan:"100%"},r.a.createElement("p",{className:"m-0 p-2 w-100 text-center"},"Nothing here, yet! See all ",r.a.createElement(j.a,{to:this.props.links.events}," events ")))):Object.keys(e).map(function(a){var n=e[a],o=n.event,s=new Date(o.start_date_and_time);return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("div",{className:"column-box"},r.a.createElement(j.a,{to:"".concat(t.props.links.events,"/").concat(o.id)},r.a.createElement("h5",null," ",o.name)))),r.a.createElement("td",null,r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null," ",o.location?"".concat(o.location.street,", ").concat(o.location.city):null),r.a.createElement("p",null," ",s?s.toLocaleDateString():null))),r.a.createElement("td",null,r.a.createElement("div",{className:"column-box"},r.a.createElement(Tt,{noText:!0,eventid:o.id,userid:t.props.user.id,rsvp:n}))))})}},{key:"renderEventsMoreInfo",value:function(e){var t=this;return!e||e.length<=0?r.a.createElement("tr",{key:"1"},r.a.createElement("td",{colSpan:"100%"},r.a.createElement("p",{className:"m-0 p-2 w-100 text-center"},"Nothing here, yet! See all ",r.a.createElement(j.a,{to:this.props.links.events}," events ")))):Object.keys(e).map(function(a){var n=e[a],o=n.event,s=new Date(o.start_date_and_time),l=new Date(o.end_date_and_time);return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("div",{className:"column-box"},r.a.createElement("h4",null,o.name))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null,t.sameDay(s,l)?s.toLocaleDateString():s.toLocaleDateString()+" - "+l.toLocaleDateString()))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null,t.sameDay(s,l)?s.toLocaleTimeString()+" - "+l.toLocaleTimeString():s.toLocaleTimeString()))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null,o.location?"".concat(o.location.street,", ").concat(o.location.city):null))),r.a.createElement("td",{className:"prod-column"},r.a.createElement("div",{className:"column-box"},r.a.createElement("p",null," ",n.status," "))))})}}]),t}(r.a.Component),zt={reduxMoveToDone:P,reduxRemoveFromTodo:w,reduxRemoveFromDone:I,reduxChangeData:_e,reduxTeamAddAction:De,reduxTeamRemoveAction:Te},Gt=Object(S.connect)(function(e){return{user:e.user.info,todo:e.user.todo,done:e.user.done,communityData:e.page.communityData,links:e.links}},zt)(Bt),Yt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(){if("--"!==a.state.value){var e={communities:a.state.value},t=H.USER+"/"+a.props.user.id;B(t,e).then(function(e){console.log(e),e.success&&(a.props.reduxLoadUserCommunities(e.data.communities),a.props.closeForm())}).catch(function(e){console.log(e)})}},a.state={value:"--"},a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{style:{display:"inline-block"}}," Community "),"\xa0",r.a.createElement("select",{value:this.state.value,onChange:this.onChange},r.a.createElement("option",{value:"--"},"--"),Object.keys(this.props.communities).map(function(t){var a=e.props.communities[t];return 0===e.props.user.communities.filter(function(e){return e.id===a.id}).length?r.a.createElement("option",{key:t,value:a.id},a.name):null})),r.a.createElement("button",{className:"thm-btn",style:{width:"99%"},onClick:this.onSubmit},"Join"),r.a.createElement("button",{className:"thm-btn",style:{width:"99%"},onClick:this.props.closeForm},"Cancel"))}},{key:"onChange",value:function(e){this.state.value;this.setState({value:e.target.value})}}]),t}(r.a.Component),Wt={reduxLoadUserCommunities:R},qt=Object(S.connect)(function(e){return{communities:e.page.communities,user:e.user.info}},Wt)(Yt),Jt=a(331),Kt=a.n(Jt),Xt=a(332),Qt=a.n(Xt),Zt=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement("img",{src:Qt.a,style:{width:"50%",margin:"auto",display:"block",paddingBottom:"20px"}}),r.a.createElement(Je,{title:"To Do List",actionRels:this.props.todo,status:"TODO",info:!0}),r.a.createElement(Je,{title:"Completed Actions",actionRels:this.props.done,status:"DONE",info:!0}),this.props.rsvps?r.a.createElement(Gt,{title:"Event RSVPs",eventRSVPs:this.props.rsvps.filter(function(t){return t.attendee&&t.attendee.id===e.props.user.id}),info:!0}):null)}}]),t}(r.a.Component),$t=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Zt,{ref:function(t){return e.componentRef=t},todo:this.props.todo,done:this.props.done,rsvps:this.props.rsvps,user:this.props.user}),r.a.createElement(Kt.a,{content:function(){return e.componentRef},trigger:function(){return r.a.createElement("button",{className:"thm-btn"}," ",r.a.createElement("i",{className:"fa fa-print"})," Print your Actions")}}))}}]),t}(r.a.Component),ea=Object(S.connect)(function(e){return{todo:e.user.todo,done:e.user.done,rsvps:e.page.rsvps,user:e.user.info}})($t),ta=a(64),aa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t;a.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t)),console.log(a.state.unittype)},a.onSubmit=function(e){e.preventDefault(),a.state.are_you_sure?a.deleteAccount():a.props.closeForm()},a.state={are_you_sure:!1,password:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("p",null," Are you sure you want to delete your account? "),"email_and_password"===this.getProvider()?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"Password ",r.a.createElement("span",{className:"text-danger"},"*"))):null,r.a.createElement("input",{type:"radio",id:"yes_im_sure",checked:this.state.are_you_sure,onChange:function(){return e.setState({are_you_sure:!e.state.are_you_sure})},style:{display:"inline-block"}}),r.a.createElement("label",{htmlFor:"yes_im_sure",style:{display:"inline-block"}}," Yes "),"\xa0",r.a.createElement("input",{type:"radio",id:"nope_not_sure",checked:!this.state.are_you_sure,onChange:function(){return e.setState({are_you_sure:!e.state.are_you_sure})},style:{display:"inline-block"}}),r.a.createElement("label",{htmlFor:"nope_not_sure",style:{display:"inline-block"}}," No"),r.a.createElement("br",null),r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit"},"Submit"),r.a.createElement("button",{className:"thm-btn red",type:"button",onClick:function(){return e.props.closeForm()}}," Cancel "))}},{key:"deleteAccount",value:function(){var e=this,t=this.getProvider();if("email_and_password"!==t)return"google"===t?void this.props.firebase.auth().signInWithPopup(gt).then(function(){e.props.firebase.auth().currentUser.delete().then(function(){z("".concat(H.USER,"/").concat(e.props.user.id)).then(function(t){console.log(t),e.props.firebase.auth().signOut(),e.props.reduxLogout()})}).catch(function(t){e.setState({error:t.message})})}):"facebook"===t?void this.props.firebase.auth().signInWithPopup(bt).then(function(){e.props.firebase.auth().currentUser.delete().then(function(){z("".concat(H.USER,"/").concat(e.props.user.id)).then(function(t){console.log(t),e.props.firebase.auth().signOut(),e.props.reduxLogout()})}).catch(function(t){e.setState({error:t.message})})}):void this.setState({error:"Unknown authorization provider. Unable to delete account"});var a=this.props.firebase.auth.EmailAuthProvider.credential(this.props.user.email,this.state.password);this.props.firebase.auth().currentUser.reauthenticateWithCredential(a).then(function(){e.props.firebase.auth().currentUser.delete().then(function(){z("".concat(H.USER,"/").concat(e.props.user.id)).then(function(t){console.log(t),e.props.firebase.auth().signOut(),e.props.reduxLogout()})})})}},{key:"getProvider",value:function(){if(this.props.auth&&this.props.auth.providerData){if("password"===this.props.auth.providerData[0].providerId)return"email_and_password";if(this.props.auth.providerData[0].providerId.toLowerCase().indexOf("google")>-1)return"google";if(this.props.auth.providerData[0].providerId.toLowerCase().indexOf("facebook")>-1)return"facebook"}return null}}]),t}(r.a.Component),na=Object(ta.a)(C.withFirebase)(aa),ra=Object(S.connect)(function(e){return{user:e.user.info,auth:e.firebase.auth}},{reduxLogin:x,reduxLogout:D})(na),oa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t;a.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t)),console.log(a.state.unittype)},a.onSubmit=function(e){if(e.preventDefault(),a.state.password1!==a.state.password2)a.setState({error:"New Passwords Must Match"});else{var t=a.props.firebase.auth.EmailAuthProvider.credential(a.props.user.email,a.state.old_password);a.props.firebase.auth().currentUser.reauthenticateWithCredential(t).then(function(){a.props.firebase.auth().currentUser.updatePassword(a.state.password1).then(function(){a.props.closeForm("Thank you, your password has been changed")}).catch(function(e){a.setState({error:e.message?e.message:e})})}).catch(function(e){a.setState({error:e.message?e.message:e})})}},a.state={error:null,old_password:null,password1:null,password2:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onSubmit},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("input",{type:"password",name:"old_password",value:this.state.old_password,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"Old Password ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("input",{type:"password",name:"password1",value:this.state.password1,onChange:this.onChange,required:!0}),r.a.createElement(Ve,{text:"Re-type your new password to confirm it. Passwords must match"},r.a.createElement("input",{type:"password",name:"password2",value:this.state.password2,onChange:this.onChange,required:!0})),r.a.createElement("p",null,"New Password ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit"},"Submit"),r.a.createElement("button",{className:"thm-btn red",type:"button",onClick:function(){return e.props.closeForm()}}," Cancel "))}}]),t}(r.a.Component),sa=Object(ta.a)(C.withFirebase)(oa),la=Object(S.connect)(function(e){return{user:e.user.info,auth:e.firebase.auth}},{reduxLogin:x})(sa),ca=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){var t;a.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t)),console.log(a.state.unittype)},a.onSubmit=function(e){e.preventDefault();var t=a.props.firebase.auth.EmailAuthProvider.credential(a.props.user.email,a.state.password);a.props.firebase.auth().currentUser.reauthenticateWithCredential(t).then(function(){a.props.firebase.auth().currentUser.updateEmail(a.state.email).then(function(){a.props.firebase.auth().currentUser.sendEmailVerification().then(function(){return console.log("email sent")}),B("".concat(H.USER,"/").concat(a.props.user.id),{email:a.state.email}).then(function(e){console.log(e)}),a.props.closeForm("Thank you, your email has been changed. Please check your inbox to verify your new email")}).catch(function(e){a.setState({error:e.message?e.message:e})})}).catch(function(e){a.setState({error:e.message?e.message:e})})},a.state={are_you_sure:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.onSubmit},this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"New Email ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.onChange,required:!0}),r.a.createElement("p",null,"Password ",r.a.createElement("span",{className:"text-danger"},"*")),r.a.createElement("button",{className:"thm-btn bg-cl-1",type:"submit"},"Submit"),r.a.createElement("button",{className:"thm-btn red",type:"button",onClick:function(){return e.props.closeForm()}}," Cancel "))}},{key:"deleteAccount",value:function(){this.setState({error:"Sorry, we don't support deleting accounts yet"})}}]),t}(r.a.Component),ia=Object(ta.a)(C.withFirebase)(ca),ua=Object(S.connect)(function(e){return{user:e.user.info,auth:e.firebase.auth}},{reduxLogin:x})(ia),ma=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).renderForm=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,a.props.user?r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("span",{style:{color:"#8dc63f"}},"Welcome")," ",a.props.user.preferred_name):"Your Profile",r.a.createElement(k.a,{onSelect:function(){return null},style:{display:"inline-block"}},r.a.createElement(k.a.Toggle,{style:{color:"#aaa",background:"white",border:"white"}}),r.a.createElement(k.a.Menu,{style:{borderTop:"5px solid #8dc63f",borderRadius:"0",padding:"0"}},r.a.createElement(k.a.Item,{onClick:function(){return a.setState({editingProfileForm:"edit"})}},"Edit Profile"),a.props.auth.providerData&&1===a.props.auth.providerData.length&&"password"===a.props.auth.providerData[0].providerId?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{onClick:function(){return a.setState({editingProfileForm:"password"})}},"Change Password"),r.a.createElement(k.a.Item,{onClick:function(){return a.setState({editingProfileForm:"email"})}},"Change Email")):null,r.a.createElement(k.a.Item,{onClick:function(){return a.setState({editingProfileForm:"delete"})}},"Delete Account"))),"\xa0\xa0"),r.a.createElement("p",null," ",a.state.message?a.state.message:""," "),"edit"===e?r.a.createElement(Ut,{full_name:a.props.user.full_name,preferred_name:a.props.user.preferred_name,closeForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.setState({editingProfileForm:null,message:e||null})}}):null,"delete"===e?r.a.createElement(ra,{closeForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.setState({editingProfileForm:null,message:e||null})}}):null,"password"===e?r.a.createElement(la,{closeForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.setState({editingProfileForm:null,message:e||null})}}):null,"email"===e?r.a.createElement(ua,{closeForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a.setState({editingProfileForm:null,message:e||null})},email:a.props.user.email}):null)},a.addHousehold=function(e){a.props.reduxAddHousehold(e),Object.keys(a.props.user.teams).map(function(e){var t=a.props.user.teams[e];a.props.reduxTeamAddHouse(t)}),a.addHouseToImpact()},a.editHousehold=function(e){a.props.reduxEditHousehold(e)},a.deleteHousehold=function(e){a.props.user.households.length>1?z("".concat(H.HOUSEHOLD,"/").concat(e.id)).then(function(t){if(console.log(t),t.success){var n=a.props.done.filter(function(t){return t.real_estate_unit.id===e.id}).length;a.props.reduxRemoveHousehold(e),a.removeHouseFromImpact(n)}}):a.setState({deletingHHError:"You need to have at least one household. Try editing the name and location or adding another household before deleting this one"})},a.leaveCommunity=function(e){if(e.id!==a.props.community.id){var t=[];a.props.user.communities.forEach(function(a){a.id!==e.id&&t.push(a.id)});var n={communities:t};B("".concat(H.USER,"/").concat(a.props.user.id),n).then(function(t){console.log(t),t.success&&a.props.reduxLeaveCommunity(e)})}else a.setState({leaveComError:"You can't leave your home community"})},a.leaveTeam=function(e){e&&a.props.user&&z("".concat(H.TEAM,"/").concat(e.id,"/member/").concat(a.props.user.id)).then(function(t){console.log(t),t.success&&(a.props.reduxLeaveTeam(e),a.props.reduxRemoveTeamMember({team:e,member:{households:a.props.user.households.length,actions:a.props.todo.length+a.props.done.length,actions_completed:a.props.done.length,actions_todo:a.props.todo.length}}))})},a.clearError=function(){a.state.deletingHHError&&a.setState({deletingHHError:null}),a.state.leaveComError&&a.setState({leaveComError:null})},a.addDefaultCommunity=function(){var e={communities:a.props.community.id},t=H.USER+"/"+a.props.user.id;B(t,e).then(function(e){console.log(e),e.success&&a.props.reduxLoadUserCommunities(e.data.communities)}).catch(function(e){console.log(e)})},a.addDefaultHousehold=function(){var e=H.USER+"/"+a.props.user.id+"/households";B(e,{name:"Home",unit_type:"RESIDENTIAL",location:""}).then(function(e){if(console.log(e),e.success){a.addHousehold(e.data);var t=[];a.props.user.households.forEach(function(e){t.push(e.id)}),fetch(H.USER+"/"+a.props.user.id,{method:"post",body:JSON.stringify({preferred_name:a.props.user.preferred_name,email:a.props.user.email,full_name:a.props.user.full_name,real_estate_units:[].concat(t)})}).then(function(e){return e.json()}).then(function(e){console.log(e)})}}).catch(function(e){console.log(e)})},a.state={loaded:!1,addedHouse:!1,selectedHousehold:null,editingHH:null,joiningCom:!1,addingHH:!1,editingProfileForm:null,printing:!1,message:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.user)return r.a.createElement(d.Redirect,{to:this.props.links.signin}," ");0!==this.props.user.households.length||this.state.addedHouse||(this.setState({addedHouse:!0}),this.addDefaultHousehold()),this.props.community&&0===this.props.user.communities.filter(function(t){return t.id===e.props.community.id}).length&&this.addDefaultCommunity();var t=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Profile"}]}),r.a.createElement("div",{className:"boxed_wrapper",onClick:this.clearError,style:{marginTop:80}},r.a.createElement("div",{className:"container"},this.state.printing?r.a.createElement(r.a.Fragment,null,r.a.createElement(ea,null),r.a.createElement("button",{className:"thm-btn text-center",onClick:function(){return e.setState({printing:!1})}}," Cancel")):r.a.createElement("div",{className:"row",style:{paddingRight:"0px",marginRight:"0px"}},r.a.createElement("div",{className:"col-lg-6 col-md-6  col-12"},this.renderForm(this.state.editingProfileForm),r.a.createElement("section",{className:"fact-counter style-2 sec-padd"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"counter-outer",style:{background:"#333",width:"100%"}},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"column counter-column col-lg-4 col-6 "},r.a.createElement(Mt,{end:this.props.done?this.props.done.length:0,icon:"icon-money",title:"Actions Completed"})),r.a.createElement("div",{className:"column counter-column  d-lg-block d-none col-4 "},r.a.createElement(Mt,{end:this.props.todo?this.props.todo.length:0,icon:"icon-money",title:"Actions To Do"})),r.a.createElement("div",{className:"column counter-column col-lg-4 col-6"},r.a.createElement(Mt,{end:this.props.done?10*this.props.done.length:0,unit:"tons",icon:"icon-money",title:"Tons of Carbon Saved"})))))),r.a.createElement("table",{className:"profile-table",style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null," Your Households "),r.a.createElement("th",null),r.a.createElement("th",null)),this.renderHouseholds(t.households),this.state.editingHH?null:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:3},this.state.addingHH?r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{user:this.props.user,addHousehold:this.addHousehold,closeForm:function(){return e.setState({addingHH:!1})}}),r.a.createElement("button",{className:"thm-btn",onClick:function(){return e.setState({addingHH:!1})},style:{width:"99%"}},"Cancel")):r.a.createElement("button",{className:"thm-btn",onClick:function(){return e.setState({addingHH:!0,editingHH:null})}},"If you have another household, let us know"))))),this.state.deletingHHError?r.a.createElement("p",{className:"text-danger"}," ",this.state.deletingHHError):null,r.a.createElement("br",null),r.a.createElement("table",{className:"profile-table",style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null," Your teams "),r.a.createElement("th",null)),this.renderTeams(t.teams),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2,align:"center"},r.a.createElement(j.a,{className:"thm-btn",to:this.props.links.teams,style:{margin:"5px"}},this.props.user.teams.length>0?"Join another Team":"Join a Team!"))))),r.a.createElement("br",null),r.a.createElement("table",{className:"profile-table",style:{width:"100%"}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null," Your Communities "),r.a.createElement("th",null)),this.renderCommunities(t.communities),r.a.createElement("tr",null,this.state.joiningCom?r.a.createElement("td",{colSpan:2},r.a.createElement(qt,{closeForm:function(){return e.setState({joiningCom:!1})}})):r.a.createElement("td",{colSpan:2},r.a.createElement("button",{className:"thm-btn",onClick:function(){return e.setState({joiningCom:!0})}},"Join another Community"))))),this.state.leaveComError?r.a.createElement("p",{className:"text-danger"}," ",this.state.leaveComError):null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("div",{className:"col-lg-6 col-md-6 col-12",style:{paddingRight:"0px",marginRight:"0px"}},this.props.todo?r.a.createElement(Je,{title:"To Do List",actionRels:this.props.todo,status:"TODO"}):null,this.props.done?r.a.createElement(Je,{title:"Completed Actions",actionRels:this.props.done,status:"DONE"}):null,this.props.rsvps?r.a.createElement(Gt,{title:"Event RSVPs",eventRSVPs:this.props.rsvps.filter(function(t){return t.attendee&&t.attendee.id===e.props.user.id})}):null,r.a.createElement("button",{className:"thm-btn text-center",onClick:function(){return e.setState({printing:!0})}}," Summarize your actions"))))))}},{key:"renderCommunities",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a];return r.a.createElement("tr",{key:a},r.a.createElement("td",null," ",r.a.createElement("a",{href:"/".concat(n.subdomain)}," ",n.name," ")),r.a.createElement("td",null," ",r.a.createElement("button",{className:"remove-btn",onClick:function(){return t.leaveCommunity(n)}}," ",r.a.createElement("i",{className:"fa fa-trash"}))," "))}):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},"You haven't joined any communities yet"))}},{key:"renderTeams",value:function(e){var t=this;return e?Object.keys(e).map(function(a){var n=e[a];return r.a.createElement("tr",{key:a},r.a.createElement("td",null,n.name," \xa0",r.a.createElement(Ve,{title:n.name,text:n.description,dir:"right"},r.a.createElement("span",{className:"fa fa-info-circle",style:{color:"#428a36"}}))),r.a.createElement("td",null," ",r.a.createElement("button",{className:"remove-btn"}," ",r.a.createElement("i",{className:"fa fa-trash",onClick:function(){return t.leaveTeam(n)}}))," "))}):null}},{key:"renderHouseholds",value:function(e){var t=this;return Object.keys(e).map(function(a){var n=e[a];return t.state.editingHH===n.id?r.a.createElement("tr",{key:a},r.a.createElement("td",{colSpan:3},r.a.createElement(Vt,{householdID:n.id,name:n.name,location:n.location,unittype:n.unit_type,user:t.props.user,editHousehold:t.editHousehold,closeForm:function(){return t.setState({editingHH:null})}}),r.a.createElement("button",{className:"thm-btn",onClick:function(){return t.setState({addingHH:!1,editingHH:null})},style:{width:"99%"}},"Cancel"))):r.a.createElement("tr",{key:a},r.a.createElement("td",null,n.name," \xa0",r.a.createElement(Ve,{title:n.name,text:n.location?"Location: "+n.location+", Type: "+n.unit_type:"No location for this household, Type: "+n.unit_type,dir:"right"},r.a.createElement("span",{className:"fa fa-info-circle",style:{color:"#428a36"}}))),r.a.createElement("td",null,r.a.createElement("button",{className:"edit-btn"}," ",r.a.createElement("i",{className:"fa fa-edit",onClick:function(){return t.setState({editingHH:n.id,addingHH:!1})}})," ")),r.a.createElement("td",null,r.a.createElement("button",{className:"remove-btn"}," ",r.a.createElement("i",{className:"fa fa-trash",onClick:function(){return t.deleteHousehold(n)}})," ")))})}},{key:"removeHouseFromImpact",value:function(e){var t=this;this.changeDataByName("EngagedHouseholdsData",-1),Object.keys(this.props.user.teams).forEach(function(a){t.props.reduxTeamRemoveHouse(t.props.user.teams[a]);for(var n=0;n<e;n++)t.props.reduxTeamRemoveAction(t.props.user.teams[a])})}},{key:"addHouseToImpact",value:function(){this.changeDataByName("EngagedHouseholdsData",1)}},{key:"changeDataByName",value:function(e,t){var a=this,n=this.props.communityData.filter(function(t){return t.name===e})[0],r={value:n.value+t>0?n.value+t:0};B(H.DATA+"/"+n.id,r).then(function(e){console.log(e),e.success&&(n=Object(g.a)({},n,{value:n.value+t>0?n.value+t:0}),a.props.reduxChangeData(n))})}}]),t}(r.a.Component),da={reduxMoveToDone:P,reduxAddHousehold:function(e){return function(t){return t({type:"ADD_HOUSEHOLD",payload:e})}},reduxEditHousehold:function(e){return function(t){return t({type:"EDIT_HOUSEHOLD",payload:e})}},reduxRemoveHousehold:function(e){return function(t){return t({type:"DELETE_HOUSHOLD",payload:e})}},reduxLeaveCommunity:function(e){return function(t){return t({type:"LEAVE_COMMUNITY",payload:e})}},reduxLoadUserCommunities:R,reduxChangeData:_e,reduxLeaveTeam:function(e){return function(t){return t({type:"LEAVE_TEAM",payload:e})}},reduxRemoveTeamMember:function(e){return function(t){return t({type:"REMOVE_TEAM_MEMBER",payload:e})}},reduxTeamRemoveHouse:function(e){return function(t){return t({type:"TEAM_REMOVE_HOUSEHOLD",payload:e})}},reduxTeamRemoveAction:Te,reduxTeamAddHouse:function(e){return function(t){return t({type:"TEAM_ADD_HOUSEHOLD",payload:e})}}},pa=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,todo:e.user.todo,done:e.user.done,communities:e.user.info?e.user.info.communities:null,community:e.page.community,communityData:e.page.communityData,households:e.user.info?e.user.info.households:null,rsvps:e.page.rsvps,links:e.links}},da)(ma),ha=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={title:{text:this.props.title,style:{fontSize:"28px",fontFamily:"'Verdana', sans-serif",color:"#263238"}},chart:{height:350,type:"bar",stacked:!!this.props.stacked&&this.props.stacked,toolbar:{show:!0},zoom:{enabled:!0}},xaxis:{categories:this.props.categories},colors:this.props.colors,responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1}},series:this.props.series};return r.a.createElement(pe.a,{style:{margin:"auto"},options:e,series:this.props.series,type:"bar"})}}]),t}(r.a.Component),fa=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row text-center justify-content-center mb-5 border-bottom"},r.a.createElement("h1",{className:"cool-font"},this.props.children))}}]),t}(r.a.Component),Ea=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.communitiesStats||this.props.communitiesStats.length<=0)return U(H.COMMUNITIES_STATS).then(function(t){console.log(t),t.success&&e.props.reduxLoadCommunitiesStats(t.data.length>0?t.data:null)}),r.a.createElement(ue,null);if(!this.props.tagCols||!this.props.communityData)return r.a.createElement(ue,null);if(!this.props.communityData||0===this.props.communityData.length)return r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null," Sorry, looks like your community's impact page is under maintenance"));var t=this.props.communitiesStats.slice(0);t=t.sort(function(e,t){return t.actions_completed-e.actions_completed});var a={categories:[],series:[{name:"Households Engaged",data:[]},{name:"Actions Completed",data:[]}]};t.forEach(function(e){a.categories.push(e.community.name),a.series[0].data.push(e.households_engaged),a.series[1].data.push(e.actions_completed)});var n=this.props.tagCols.filter(function(e){return"Category"===e.name})[0].tags,o=[],s=[{name:"State reported",data:[]},{name:"Self reported",data:[]}];n.forEach(function(t){var a=e.props.communityData.filter(function(e){return e.tag===t.id})[0];if(a){o.push(a.name),s[1].data.push(a.value);var n=e.props.communityData.filter(function(e){return e.tag&&e.tag===a.tag&&e.name.toLowerCase().indexOf("state")>-1})[0];n?s[0].data.push(n.value):s[0].data.push(0)}});var l=this.props.communityData.filter(function(e){return"EngagedHouseholdsData"===e.name})[0],c=this.props.communityData.filter(function(e){return"ActionsCompletedData"===e.name})[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Impact"}]}),r.a.createElement("div",{className:"boxed-wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"container bg-light p-5"},r.a.createElement(fa,null,"Our Community's Impact"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-4"},r.a.createElement("div",{className:"card rounded-0 mb-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement(he,{num:l.value,goal:Number(l.denominator),label:"Households Engaged",size:150,colors:["#428a36"]}))),r.a.createElement("div",{className:"card rounded-0 mb-4"},r.a.createElement("div",{className:"card-body"},r.a.createElement(he,{num:c.value,goal:Number(c.denominator),label:"Actions Completed",size:150,colors:["#FB5521"]})))),r.a.createElement("div",{className:"col-12 col-lg-8"},r.a.createElement("div",{className:"card rounded-0 mb-4"},r.a.createElement("div",{className:"card-header text-center bg-white"},r.a.createElement("h4",{className:"cool-font"},"Actions Compeleted"),r.a.createElement("p",{style:{top:240,position:"absolute",fontSize:16,transform:"rotateZ(-90deg",left:-100}},"Number Of Actions Completed")),r.a.createElement("div",{className:"card-body"},r.a.createElement(ha,{categories:o,series:s,stacked:!0,colors:["#86bd7d","#428a36"]}),r.a.createElement("center",null,r.a.createElement("p",{style:{fontSize:16,margin:0},className:"cool-font"},"Community Goals")))),r.a.createElement("div",{className:"card rounded-0 mb-4"},r.a.createElement("div",{className:"card-header text-center bg-white"},r.a.createElement("h4",{className:"cool-font"},"Communities and their Impacts"),r.a.createElement("p",{style:{top:240,position:"absolute",fontSize:14,transform:"rotateZ(-90deg",left:-133}},"Number Of Actions Completed By Community")),r.a.createElement("div",{className:"card-body"},r.a.createElement(ha,{categories:a.categories,series:a.series,colors:["#428a36","#FB5521"]}),r.a.createElement("center",null,r.a.createElement("p",{style:{fontSize:16,margin:0}},"Communities")))))))))}}]),t}(r.a.Component),va=Object(S.connect)(function(e){return{communitiesStats:e.page.communitiesStats,communityData:e.page.communityData,tagCols:e.page.tagCols}},{reduxLoadCommunitiesStats:Ce})(Ea),ga=a(334),ba=a.n(ga),ya=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.content,a=t.title,n=t.desc;return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-box"},r.a.createElement("h4",{onClick:function(){e.props.toggler()},className:" modal-close-x round-me"},r.a.createElement("span",{className:"fa fa-close"})),r.a.createElement("center",null,r.a.createElement("h5",null,a),r.a.createElement("div",null,r.a.createElement("p",null,n)))),r.a.createElement("div",{className:"desc-modal-container",onClick:function(){e.props.toggler()}}))}}]),t}(n.Component),Oa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).renderModal=function(){if(a.state.modal_toggled)return r.a.createElement(ya,{content:a.state.modal_content,toggler:a.toggleModal})},a.toggleModal=function(){var e=a.state.modal_toggled;a.setState({modal_toggled:!e})},a.inTeam=function(e){return!!a.props.user&&a.props.user.teams.filter(function(t){return t.id===e}).length>0},a.joinTeam=function(e){var t={members:a.props.user.id};B("".concat(H.TEAM,"/").concat(e.id),t).then(function(t){console.log(t),t.success&&(a.props.reduxJoinTeam(e),a.props.reduxAddTeamMember({team:e,member:{households:a.props.user.households.length,actions:a.props.todo.length+a.props.done.length,actions_completed:a.props.done.length,actions_todo:a.props.todo.length}}))})},a.state={modal_toggled:!1,modal_content:{title:"...",desc:"..."}},a.toggleModal=a.toggleModal.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.teamsPage;return null==e?r.a.createElement("p",{className:"text-center"}," Sorry, looks like this community's Teams Page is under maintenance. Try again later "):r.a.createElement(r.a.Fragment,null,this.renderModal(),r.a.createElement(Ae,{links:[{name:"Teams"}]}),r.a.createElement("div",{className:"boxed_wrapper p-5",style:{marginTop:90}},r.a.createElement(fa,null,"Teams Leaderboard"),r.a.createElement(ba.a,{bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Team Name"),r.a.createElement("th",null,"# Households"),r.a.createElement("th",null,"# Actions Completed"),r.a.createElement("th",null,"Average # Actions/Household"),r.a.createElement("th",null,r.a.createElement(Ve,{text:"Brad's paragraph here",dir:"left"},r.a.createElement("span",{className:"has-tooltip"},"Carbon Impact"))),r.a.createElement("th",null,"Join Team"))),r.a.createElement("tbody",null,this.renderTeamsData(e)))))}},{key:"renderTeamsData",value:function(e){for(var t=this,a=e.slice(0),n=0;n<a.length;n++){var o=a[n].households,s=a[n].actions_completed,l=Number(s)/Number(o);l=isNaN(l)?0:l.toFixed(1),a[n].avrgActionsPerHousehold=l}return(a=a.sort(function(e,t){return t.avrgActionsPerHousehold-e.avrgActionsPerHousehold})).map(function(e){var a=e.team.description.length>70?e.team.description.substr(0,70)+"...":e.team.description;return r.a.createElement("tr",null,r.a.createElement("td",null,e.team.name," \xa0",r.a.createElement(Ve,{title:e.team.name,text:a,dir:"right"},r.a.createElement("div",null,r.a.createElement("small",{className:"more-hyperlink",onClick:function(){t.setState({modal_content:{title:e.team.name,desc:e.team.description}}),t.toggleModal()}},"More..."),r.a.createElement("span",{className:"fa fa-info-circle",style:{color:"#428a36"}})))),r.a.createElement("td",null,e.households),r.a.createElement("td",null,e.actions_completed),r.a.createElement("td",null,e.avrgActionsPerHousehold),r.a.createElement("td",null,"..."),t.props.user?r.a.createElement("td",null,t.inTeam(e.team.id)?r.a.createElement("button",{className:"thm-btn red"},r.a.createElement("i",{className:"fa fa-hand-peace-o"}," ")," Leave"):r.a.createElement("button",{className:"thm-btn",onClick:function(){console.log("clicked"),t.joinTeam(e.team)}},r.a.createElement("i",{className:"fa fa-user-plus"}," ")," Join ")):r.a.createElement("td",null,r.a.createElement("p",null,r.a.createElement(j.a,{to:t.props.links.signin},"Sign In")," to join a team")))})}}]),t}(r.a.Component),Na={reduxJoinTeam:function(e){return function(t){return t({type:"JOIN_TEAM",payload:e})}},reduxAddTeamMember:function(e){return function(t){return t({type:"ADD_TEAM_MEMBER",payload:e})}}},ka=Object(S.connect)(function(e){return{user:e.user.info,todo:e.user.todo,done:e.user.done,teamsPage:e.page.teamsPage,links:e.links}},Na)(Oa),ja=a(339),Sa=a(47),Ca=a.n(Sa),xa=a(136),Da=a.n(xa),Ta={email:"",passwordOne:"",passwordTwo:"",firstName:"",lastName:"",preferredName:"",serviceProvider:!1,termsAndServices:!1,showTOSError:!1,showTOS:!1,form:1,error:null},_a=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).renderPage=function(e){return console.log(e),1===e?a.renderPage1():2===e?a.renderPage2():3===e?a.renderPage3():void 0},a.renderPage1=function(){var e=a.state,t=e.email,n=e.passwordOne,o=e.passwordTwo,s=e.error;return r.a.createElement("div",{className:"styled-form register-form"},r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("h3",null,"Register With Email and Password")),r.a.createElement("form",{onSubmit:a.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-envelope-o"})),r.a.createElement("input",{type:"email",name:"email",value:t,onChange:a.onChange,placeholder:"Enter your email",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-unlock-alt"})),r.a.createElement("input",{type:"password",name:"passwordOne",value:n,onChange:a.onChange,placeholder:"Enter your password",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-unlock-alt"})),r.a.createElement("input",{type:"password",name:"passwordTwo",value:o,onChange:a.onChange,placeholder:"Re-enter your password",required:!0})),r.a.createElement("br",null),s&&r.a.createElement("p",{style:{color:"red"}}," ",s," "),r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"form-group pull-left"},r.a.createElement("button",{type:"submit",disabled:a.isInvalid(),className:"thm-btn"},"Create Account")))),r.a.createElement("div",{style:{width:"100%",height:"0px",borderBottom:"solid 1px black",marginBottom:"15px"}}),r.a.createElement("div",{className:"section-title style-2"},r.a.createElement("h3",null,"Register with Google or Facebook")),r.a.createElement("div",{className:"form-group social-links-three padd-top-5"},r.a.createElement("button",{onClick:a.signInWithFacebook,id:"facebook",className:"img-circle facebook"},r.a.createElement("span",{className:"fa fa-facebook-f"}," Register with Facebook")),r.a.createElement("button",{onClick:a.signInWithGoogle,id:"google",className:"img-circle google"},r.a.createElement("span",{className:"fa fa-google"}," Register with Google"))),"Already have an account? ",r.a.createElement(j.a,{to:a.props.links.signin},"Sign In"))},a.renderPage2=function(){var e=a.state,t=e.firstName,n=e.lastName,o=e.preferredName,s=e.serviceProvider,l=e.termsAndServices;return r.a.createElement("div",{className:"styled-form register-form"},r.a.createElement("form",{onSubmit:a.onFinalSubmit},a.props.firebase.auth().currentUser.emailVerified?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-user"})),r.a.createElement("input",{type:"text",name:"firstName",value:t,onChange:a.onChange,placeholder:"First Name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-user"})),r.a.createElement("input",{type:"text",name:"lastName",value:n,onChange:a.onChange,placeholder:"Last Name",required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("span",{className:"adon-icon"},r.a.createElement("span",{className:"fa fa-envelope-o"})),r.a.createElement("input",{type:"text",name:"preferredName",value:o,onChange:a.onChange,placeholder:"Enter a Preferred Name or Nickname"})),r.a.createElement("label",{className:"checkbox-container"},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"serviceProvider",onChange:function(){a.setState({serviceProvider:!s})},checked:s}),r.a.createElement("span",{className:"checkmark"}),r.a.createElement("p",{style:{marginLeft:"25px"}},"Are you a Service Provider?")),r.a.createElement("label",{className:"checkbox-container"},r.a.createElement("input",{className:"checkbox",type:"checkbox",name:"termsAndServices",onChange:function(){a.setState({termsAndServices:!l})},checked:l}),r.a.createElement("span",{className:"checkmark"}),r.a.createElement("p",{style:{marginLeft:"25px"}},"I agree to MassEnergize\u2019s ",r.a.createElement("button",{type:"button",onClick:function(){return a.setState({showTOS:!0})},className:"as-link",style:{display:"inline-block"}},"Terms of Service")," and ",r.a.createElement("button",{type:"button",onClick:function(){return a.setState({showPP:!0})},className:"as-link",style:{display:"inline-block"}},"Privacy Policy"))),r.a.createElement(ja.a,{sitekey:"6LcLsLUUAAAAAL1MkpKSBX57JoCnPD389C-c-O6F",onChange:a.onReCaptchaChange})):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," We sent a link to your email address. Please verify your email and sign in to continue.",r.a.createElement("button",{type:"button",className:"as-link",onClick:a.sendVerificationEmail}," Resend Verification Email "),r.a.createElement("br",null),r.a.createElement(j.a,{to:a.props.links.signin,onClick:function(){return a.props.firebase.auth().signOut()}}," Sign in"))),a.state.error&&r.a.createElement("p",{style:{color:"red"}}," ",a.state.error," "),r.a.createElement("div",{className:"clearfix"},r.a.createElement("div",{className:"form-group pull-left"},a.props.auth.emailVerified?r.a.createElement("button",{type:"submit",className:"thm-btn"},"Finish Creating Account"):null,r.a.createElement(Ve,{text:"Cancling in the middle of registration will delete your account"},r.a.createElement("button",{onClick:a.deleteFirebaseAccount,className:"thm-btn red"}," Cancel "))))))},a.sendVerificationEmail=function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/Demo"}).EMAIL_REDIRECT_URL),a.props.firebase.auth().currentUser.sendEmailVerification().then(function(){return console.log("email sent")})},a.onReCaptchaChange=function(e){e||a.setState({captchaConfirmed:!1}),B(H.VERIFY,{captchaString:e}).then(function(e){console.log(e),e.success&&e.data.success&&a.setState({captchaConfirmed:!0})})},a.deleteFirebaseAccount=function(){a.props.firebase.auth().currentUser.delete(),a.props.firebase.auth().signOut()},a.signInWithGoogle=function(){a.props.firebase.auth().setPersistence(a.state.persistence).then(function(){a.props.firebase.auth().signInWithPopup(gt).then(function(e){console.log(e),a.fetchAndLogin(e.user.email).then(function(e){}),a.setState(Object(g.a)({},Ta,{form:2}))}).catch(function(e){console.log(e),a.setState(Object(g.a)({},Ta,{form:2}))})})},a.signInWithFacebook=function(){a.props.firebase.auth().setPersistence(a.state.persistence).then(function(){a.props.firebase.auth().signInWithPopup(bt).then(function(e){a.fetchAndLogin(e.user.email),e.emailVerified||a.sendVerificationEmail(),a.setState(Object(g.a)({},Ta))}).catch(function(e){a.setState({error:e.message})})})},a.fetchAndLogin=function(){var e=Object(f.a)(h.a.mark(function e(t){var n,r,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U("".concat(H.USER,"/e/").concat(t));case 3:if(!(n=e.sent).success||!n.data){e.next=15;break}return a.props.reduxLogin(n.data),e.next=8,U("".concat(H.USER,"/e/").concat(t,"/actions?status=TODO"));case 8:return r=e.sent,a.props.reduxLoadTodo(r.data),e.next=12,U("".concat(H.USER,"/e/").concat(t,"/actions?status=DONE"));case 12:return o=e.sent,a.props.reduxLoadDone(o.data),e.abrupt("return",!0);case 15:return console.log("fetch and login failed"),e.abrupt("return",!1);case 19:return e.prev=19,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,null,[[0,19]])}));return function(t){return e.apply(this,arguments)}}(),a.state=Object(g.a)({},Ta,{persistence:a.props.firebase.auth.Auth.Persistence.SESSION,form:e.form?e.form:1}),a.onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a.isInvalid=a.isInvalid.bind(Object(b.a)(Object(b.a)(a))),a.onSubmit=a.onSubmit.bind(Object(b.a)(Object(b.a)(a))),a.onFinalSubmit=a.onFinalSubmit.bind(Object(b.a)(Object(b.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this;if(!this.props.auth||!this.props.user||!this.props.policies)return r.a.createElement(ue,null);e=this.props.auth.isEmpty?1:2;var a=this.props.policies.filter(function(e){return"Terms of Service"===e.name})[0],n=this.props.policies.filter(function(e){return"Privacy Policy"===e.name})[0];return this.props.user.info&&this.props.user.todo&&this.props.user.done&&this.props.auth.emailVerified?r.a.createElement(d.Redirect,{to:this.props.links.profile}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,this.renderPage(e)),r.a.createElement(Ca.a,{show:this.state.showTOS,onHide:function(){return t.setState({showTOS:!1})},centered:!0},r.a.createElement(Ca.a.Header,{closeButton:!0},r.a.createElement(Ca.a.Title,null,"Terms of Service")),r.a.createElement(Ca.a.Body,{dangerouslySetInnerHTML:{__html:a?a.description:"The Terms of Service failed to load or does not exist"},style:{maxHeight:"50vh",overflowY:"scroll"}}),r.a.createElement(Ca.a.Footer,null,r.a.createElement(Da.a,{variant:"secondary",onClick:function(){return t.setState({showTOS:!1})}},"Close"))),r.a.createElement(Ca.a,{show:this.state.showPP,onHide:function(){return t.setState({showPP:!1})},centered:!0},r.a.createElement(Ca.a.Header,{closeButton:!0},r.a.createElement(Ca.a.Title,null,"Privacy Policy")),r.a.createElement(Ca.a.Body,{dangerouslySetInnerHTML:{__html:n?n.description:"The privacy policy failed to load or does not exist"},style:{maxHeight:"50vh",overflowY:"scroll"}}),r.a.createElement(Ca.a.Footer,null,r.a.createElement(Da.a,{variant:"secondary",onClick:function(){return t.setState({showPP:!1})}},"Close"))))}},{key:"onChange",value:function(e){var t;this.setState((t={},Object(re.a)(t,e.target.name,e.target.value),Object(re.a)(t,"error",null),t))}},{key:"isInvalid",value:function(){var e=this.state,t=e.passwordOne,a=e.email,n=e.name;return t!==e.passwordTwo||""===t||""===a||""===n}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,r=a.passwordOne;this.props.firebase.auth().setPersistence(this.state.persistence).then(function(){t.props.firebase.auth().createUserWithEmailAndPassword(n,r).then(function(e){t.setState(Object(g.a)({},Ta,{form:2})),t.sendVerificationEmail()}).catch(function(e){t.setState({error:e.message})})})}},{key:"onFinalSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.termsAndServices)if(this.state.captchaConfirmed){var a=this.state,n=a.firstName,r=a.lastName,o=a.preferredName,s=a.serviceProvider,l=a.termsAndServices;if(!l)return void this.setState({showTOSError:!0});var c={full_name:n+" "+r,preferred_name:""===o?n:o,email:this.props.auth.email,is_vendor:s,accepts_terms_and_conditions:l};B(H.USERS,c).then(function(e){console.log(e),e.success&&e.data&&t.fetchAndLogin(e.data.email).then(function(e){e||t.setState({error:"Failed to Register"})})}),this.setState(Object(g.a)({},Ta))}else this.setState({error:"Invalid reCAPTCHA, please try again"});else this.setState({error:"You need to agree to the terms and services"})}}]),t}(r.a.Component),wa=Object(ta.a)(C.withFirebase)(_a),Aa=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user,policies:e.page.policies,links:e.links}},{reduxLogin:x,reduxLoadDone:A,reduxLoadTodo:T})(wa),La=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Sign Up"}]}),r.a.createElement("div",{className:"boxed_wrapper"},r.a.createElement("section",{className:"register-section sec-padd-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"form-column column col-md-6 col-12 offset-md-3"},this.props.location.pathname!==this.props.links.signup?r.a.createElement("p",{style:{color:"red"}}," Please finish creating your account before you continue"):null,r.a.createElement(Aa,null)))))))}}]),t}(r.a.Component),Ia=Object(S.connect)(function(e){return{links:e.links}})(La),Pa=a(150),Ra=a.n(Pa),Ma=a(151),Fa=a.n(Ma),Va=a(335),Ha=a.n(Va),Ua=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.policies?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Policies"}]}),r.a.createElement("div",{className:"boxed-wrapper"},r.a.createElement("div",{className:"container p-5"},r.a.createElement(Ra.a,{defaultActiveKey:"0"},this.renderPolicies(this.props.policies))))):r.a.createElement(ue,null)}},{key:"renderPolicies",value:function(e){var t=Ha.a.parse(this.props.location.search);return t&&t.name&&(e=e.filter(function(e){return console.log(t.name),console.log(e.name),e.name===t.name})),Object.keys(e).map(function(t){var a=e[t];return r.a.createElement(Fa.a,{key:t},r.a.createElement(Ra.a.Toggle,{as:Fa.a.Header,eventKey:t},a.name),r.a.createElement(Ra.a.Collapse,{eventKey:t},r.a.createElement(Fa.a.Body,{dangerouslySetInnerHTML:{__html:a.description}})))})}}]),t}(r.a.Component),Ba=Object(S.connect)(function(e){return{policies:e.page.policies}},null)(Ua),za=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){if(!this.props.donatePage)return r.a.createElement("p",{className:"text-center"}," Sorry, looks like this community's Donate Page is under maintenance. Try again later ");var e=this.props.donatePage.sections;if(null==e)return r.a.createElement(ue,null);var t=G(e,"DonatePageHeader",!0),a=G(e,"DonatePageButton",!0);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae,{links:[{name:"Donate"}]}),r.a.createElement("div",{className:"boxed-wrapper",style:{marginTop:90}},r.a.createElement("div",{className:"container p-5"},r.a.createElement(fa,null,t.title),r.a.createElement("p",null,t.description),r.a.createElement("br",null),r.a.createElement("div",{class:"row text-center justify-content-center"},r.a.createElement("div",{class:"col-12 col-md-6 col-lg-4"},r.a.createElement("form",{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",target:"_top"},r.a.createElement("input",{type:"hidden",name:"cmd",value:"_donations"}),r.a.createElement("input",{type:"hidden",name:"business",value:a.info.business}),r.a.createElement("input",{type:"hidden",name:"currency_code",value:"USD"}),r.a.createElement("input",{type:"image",className:"w-100",src:"https://i.imgur.com/CwBgXO2.png",border:"0",name:"submit",title:"PayPal - The safer, easier way to pay online!",alt:"Donate with PayPal button"}),r.a.createElement("img",{alt:"",border:"0",src:"https://www.paypal.com/en_US/i/scr/pixel.gif",width:"1",height:"1"})))))))}}]),t}(r.a.Component),Ga=Object(S.connect)(function(e){return{donatePage:e.page.donatePage}},null)(za),Ya=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.communities?r.a.createElement("div",{className:"boxed_wrapper"},r.a.createElement("img",{className:"text-center",style:{margin:"auto",display:"block",maxWidth:"500px"},src:O.a}),r.a.createElement("h1",{className:"text-center"}," Welcome to the Community Portal "),r.a.createElement("h3",{className:"text-center"}," Select Your Community Below"),r.a.createElement("ul",{className:"text-center"},Object.keys(this.props.communities).map(function(t){var a=e.props.communities[t];return r.a.createElement("li",{key:t}," ",r.a.createElement("a",{href:"/".concat(a.subdomain)},a.name))})),r.a.createElement("h3",{className:"text-center"}," Or go to our main site"),r.a.createElement("p",{className:"text-center"},r.a.createElement("a",{href:"https://massenergize.org"},"MassEnergize")," ")):r.a.createElement(ue,null)}}]),t}(r.a.Component),Wa=Object(S.connect)(function(e){return{communities:e.page.communities}})(Ya),qa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={triedLogin:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.subdomain;this.props.reduxLoadLinks({home:"/".concat(t),actions:"/".concat(t,"/actions"),aboutus:"/".concat(t,"/aboutus"),services:"/".concat(t,"/services"),testimonials:"/".concat(t,"/testimonials"),teams:"/".concat(t,"/teams"),impact:"/".concat(t,"/impact"),donate:"/".concat(t,"/donate"),events:"/".concat(t,"/events"),signin:"/".concat(t,"/signin"),signup:"/".concat(t,"/signup"),profile:"/".concat(t,"/profile"),policies:"/".concat(t,"/policies")}),Promise.all([U(H.COMMUNITY+t+"/pages?name=Home"),U(H.TEAMS_STATS+"?community__subdomain="+t),U(H.COMMUNITY+t+"/pages?name=AboutUs"),U(H.COMMUNITY+t+"/pages?name=Donate"),U(H.COMMUNITY+t+"/events"),U(H.COMMUNITY+t+"/actions"),U(H.COMMUNITY+t+"/vendors"),U(H.COMMUNITY+t+"/testimonials"),U(H.MENUS),U(H.POLICIES),U(H.EVENT_ATTENDEES),U(H.COMMUNITIES),U(H.TAG_COLLECTIONS),U(H.COMMUNITY+t+"/data")]).then(function(a){e.props.reduxLoadHomePage(a[0].data.length>0?a[0].data[0]:null),e.props.reduxLoadTeamsPage(a[1].data.length>0?a[1].data:null),e.props.reduxLoadAboutUsPage(a[2].data.length>0?a[2].data[0]:null),e.props.reduxLoadDonatePage(a[3].data.length>0?a[3].data[0]:null),e.props.reduxLoadEvents(a[4].data),e.props.reduxLoadActions(a[5].data),e.props.reduxLoadServiceProviders(a[6].data),e.props.reduxLoadTestimonials(a[7].data),e.props.reduxLoadMenu(a[8].data),e.props.reduxLoadPolicies(a[9].data),e.props.reduxLoadRSVPs(a[10].data),e.props.reduxLoadCommunities(a[11].data),e.props.reduxLoadCommunity(a[11].data.filter(function(e){return e.subdomain===t})[0]),e.props.reduxLoadTagCols(a[12].data),e.props.reduxLoadCommunityData(a[13].data)}).catch(function(t){e.setState({error:t}),console.log(t)})}},{key:"getUser",value:function(){var e=Object(f.a)(h.a.mark(function e(t){var a,n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("".concat(H.USER,"/e/").concat(t));case 2:if(!(a=e.sent).success||!a.data){e.next=16;break}return this.props.reduxLogin(a.data),e.next=7,U("".concat(H.USER,"/e/").concat(t,"/actions?status=TODO"));case 7:return n=e.sent,this.props.reduxLoadTodo(n.data),e.next=11,U("".concat(H.USER,"/e/").concat(t,"/actions?status=DONE"));case 11:return r=e.sent,this.props.reduxLoadDone(r.data),e.abrupt("return",!0);case 16:return console.log("no user"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(document.body.style.overflowX="hidden",!Object(C.isLoaded)(this.props.auth))return console.log("auth loading"),r.a.createElement(ue,null);if(this.state.triedLogin||!this.props.auth.uid||this.props.user||this.getUser(this.props.auth.email).then(function(t){e.setState({triedLogin:!0})}),this.props.auth.uid&&!this.state.triedLogin)return console.log("user loading"),r.a.createElement(ue,null);var t=this.props.links;return r.a.createElement("div",{className:"boxed-wrapper"},r.a.createElement("div",{className:"burger-menu-overlay"}),r.a.createElement(v.a,null,r.a.createElement("meta",{charset:"UTF-8"}),r.a.createElement("title",null,"Mass Energize"),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"})),this.props.menu?r.a.createElement("div",null,r.a.createElement(W,{navLinks:this.props.menu.filter(function(e){return"PortalMainNavLinks"===e.name})[0].content}),r.a.createElement($,null)):r.a.createElement(ue,null),this.state.triedLogin&&!this.props.user&&this.props.auth.uid||this.props.auth.uid&&!this.props.auth.emailVerified?r.a.createElement(d.Switch,null,r.a.createElement(d.Route,{component:Ia})):r.a.createElement(d.Switch,null,r.a.createElement(d.Route,{exact:!0,path:t.home,component:Se}),r.a.createElement(d.Route,{exact:!0,path:"".concat(t.home,"/home"),component:Se}),r.a.createElement(d.Route,{exact:!0,path:t.actions,component:Qe}),r.a.createElement(d.Route,{path:t.aboutus,component:lt}),r.a.createElement(d.Route,{exact:!0,path:t.services,component:it}),r.a.createElement(d.Route,{path:"".concat(t.services,"/:id"),component:mt}),r.a.createElement(d.Route,{path:"".concat(t.actions,"/:id"),component:et}),r.a.createElement(d.Route,{path:t.testimonials,component:pt}),r.a.createElement(d.Route,{path:t.teams,component:ka}),r.a.createElement(d.Route,{path:t.impact,component:va}),r.a.createElement(d.Route,{path:t.donate,component:Ga}),r.a.createElement(d.Route,{exact:!0,path:t.events,component:wt}),r.a.createElement(d.Route,{path:"".concat(t.events,"/:id"),component:Lt}),r.a.createElement(d.Route,{path:t.signin,component:St}),r.a.createElement(d.Route,{path:t.signup,component:Ia}),r.a.createElement(d.Route,{path:t.profile,component:pa}),r.a.createElement(d.Route,{path:t.policies,component:Ba}),r.a.createElement(d.Route,{component:function(){return r.a.createElement("div",null,"404 Error: Page not Found")}})),this.props.menu?r.a.createElement(ie,{footerLinks:this.props.menu.filter(function(e){return"PortalFooterQuickLinks"===e.name})[0].content,footerInfo:this.props.menu.filter(function(e){return"PortalFooterContactInfo"===e.name})[0].content}):r.a.createElement(ue,null))}}]),t}(n.Component),Ja={reduxLoadCommunity:function(e){return function(t){return t({type:"LOAD_COMMUNITY",payload:e})}},reduxLoadHomePage:function(e){return function(t){return t({type:"LOAD_HOME_PAGE",payload:e})}},reduxLoadActionsPage:function(e){return function(t){return t({type:"LOAD_ACTIONS_PAGE",payload:e})}},reduxLoadServiceProvidersPage:function(e){return function(t){return t({type:"LOAD_SERVICE_PROVIDERS_PAGE",payload:e})}},reduxLoadTestimonialsPage:function(e){return function(t){return t({type:"LOAD_TESTIMONIALS_PAGE",payload:e})}},reduxLoadTeamsPage:function(e){return function(t){return t({type:"LOAD_TEAMS_PAGE",payload:e})}},reduxLoadAboutUsPage:function(e){return function(t){return t({type:"LOAD_ABOUT_US_PAGE",payload:e})}},reduxLoadCommunitiesStats:Ce,reduxLoadDonatePage:function(e){return function(t){return t({type:"LOAD_DONATE_PAGE",payload:e})}},reduxLoadEventsPage:function(e){return function(t){return t({type:"LOAD_EVENTS_PAGE",payload:e})}},reduxLoadMenu:function(e){return function(t){return t({type:"LOAD_MENU",payload:e})}},reduxLoadPolicies:function(e){return function(t){return t({type:"LOAD_POLICIES",payload:e})}},reduxLoadActions:function(e){return function(t){return t({type:"LOAD_ACTIONS",payload:e})}},reduxLoadEvents:function(e){return function(t){return t({type:"LOAD_EVENTS",payload:e})}},reduxLoadServiceProviders:function(e){return function(t){return t({type:"LOAD_SERVICE_PROVIDERS",payload:e})}},reduxLoadTestimonials:function(e){return function(t){return t({type:"LOAD_TESTIMONIALS",payload:e})}},reduxLoadCommunities:xe,reduxLogin:x,reduxLoadTodo:T,reduxLoadDone:A,reduxLoadRSVPs:function(e){return function(t){return t({type:"LOAD_EVENT_RSVPS",payload:e})}},reduxLoadTagCols:function(e){return function(t){return t({type:"LOAD_TAG_COLS",payload:e})}},reduxLoadCommunityData:function(e){return function(t){return t({type:"LOAD_COMMUNITY_DATA",payload:e})}},reduxLoadLinks:function(e){return function(t){return t({type:"LOAD_LINKS",payload:e})}}},Ka=Object(S.connect)(function(e){return{auth:e.firebase.auth,user:e.user.info,menu:e.page.menu,links:e.links}},Ja)(qa),Xa=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).showError=function(e){return r.a.createElement("p",{className:"text-center text-danger"}," ",e," ")},a.state={error:null},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;U(H.COMMUNITIES).then(function(t){t.success&&e.props.reduxLoadCommunities(t.data)}).catch(function(t){return e.setState({error:t})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.error?r.a.createElement(r.a.Fragment,null,this.showError(this.state.error)):r.a.createElement(d.Switch,null,r.a.createElement(d.Route,{path:"/:subdomain",component:Ka}),r.a.createElement(d.Route,{component:Wa})))}}]),t}(n.Component),Qa={reduxLoadCommunities:xe},Za=Object(S.connect)(null,Qa)(Xa),$a=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(r.a.Component),en=Object(d.withRouter)($a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tn=a(336),an=a(338),nn=a(36),rn=Object(nn.a)(),on=a(26),sn={info:null,todo:null,done:null},ln={homePage:null,actionsPage:null,serviceProvidersPage:null,testimonialsPage:null,teamsPage:null,aboutUsPage:null,donatePage:null,eventsPage:null,menu:null,policies:null,actions:null,events:null,serviceProviders:null,testimonials:null,tagCols:null,communities:null,communitiesStats:null,community:null,communityData:null,communityAdmins:null},cn={},un=Object(ht.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(g.a)({},e,{info:t.payload});case"LOGOUT":return sn;case"LOAD_TODO":return Object(g.a)({},e,{todo:t.payload});case"ADD_TO_TODO":return Object(g.a)({},e,{todo:[].concat(Object(on.a)(e.todo),[t.payload])});case"REMOVE_FROM_TODO":return Object(g.a)({},e,{todo:e.todo.filter(function(e){return e.id!==t.payload.id})});case"LOAD_DONE":return Object(g.a)({},e,{done:t.payload});case"ADD_TO_DONE":return Object(g.a)({},e,{done:[].concat(Object(on.a)(e.done),[t.payload])});case"REMOVE_FROM_DONE":return Object(g.a)({},e,{done:e.done.filter(function(e){return e.id!==t.payload.id})});case"MOVE_TO_DONE":return Object(g.a)({},e,{done:[].concat(Object(on.a)(e.done),[t.payload]),todo:e.todo.filter(function(e){return e.id!==t.payload.id})});case"LOAD_HOUSEHOLDS":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{households:t.payload})});case"ADD_HOUSEHOLD":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{households:[].concat(Object(on.a)(e.info.households),[t.payload])})});case"EDIT_HOUSEHOLD":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{households:[].concat(Object(on.a)(e.info.households.filter(function(e){return e.id!==t.payload.id})),[t.payload])})});case"DELETE_HOUSHOLD":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{households:e.info.households.filter(function(e){return e.id!==t.payload.id})}),todo:e.todo.filter(function(e){return e.real_estate_unit.id!==t.payload.id}),done:e.done.filter(function(e){return e.real_estate_unit.id!==t.payload.id})});case"LOAD_USER_COMMUNITIES":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{communities:t.payload})});case"ADD_COMMUNITY":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{communities:[].concat(Object(on.a)(e.info.communities),[t.payload])})});case"LEAVE_COMMUNITY":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{communities:e.info.communities.filter(function(e){return e!==t.payload})})});case"JOIN_TEAM":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{teams:[].concat(Object(on.a)(e.info.teams),[t.payload])})});case"LEAVE_TEAM":return Object(g.a)({},e,{info:Object(g.a)({},e.info,{teams:e.info.teams.filter(function(e){return e.id!==t.payload.id})})});default:return Object(g.a)({},e)}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_COMMUNITY":return Object(g.a)({},e,{community:t.payload});case"LOAD_COMMUNITY_DATA":return Object(g.a)({},e,{communityData:t.payload});case"LOAD_COMMUNITY_ADMINS":return Object(g.a)({},e,{communityAdmins:t.payload});case"LOAD_HOME_PAGE":return Object(g.a)({},e,{homePage:t.payload});case"LOAD_ACTIONS_PAGE":return Object(g.a)({},e,{actionsPage:t.payload});case"LOAD_SERVICE_PROVIDERS_PAGE":return Object(g.a)({},e,{serviceProvidersPage:t.payload});case"LOAD_TESTIMONIALS_PAGE":return Object(g.a)({},e,{testimonialsPage:t.payload});case"LOAD_TEAMS_PAGE":return Object(g.a)({},e,{teamsPage:t.payload});case"LOAD_ABOUT_US_PAGE":return Object(g.a)({},e,{aboutUsPage:t.payload});case"LOAD_COMMUNITIES_STATS":return Object(g.a)({},e,{communitiesStats:t.payload});case"LOAD_DONATE_PAGE":return Object(g.a)({},e,{donatePage:t.payload});case"LOAD_EVENTS_PAGE":return Object(g.a)({},e,{eventsPage:t.payload});case"LOAD_MENU":return Object(g.a)({},e,{menu:t.payload});case"LOAD_POLICIES":return Object(g.a)({},e,{policies:t.payload});case"LOAD_ACTIONS":return Object(g.a)({},e,{actions:t.payload});case"LOAD_EVENTS":return Object(g.a)({},e,{events:t.payload});case"LOAD_SERVICE_PROVIDERS":return Object(g.a)({},e,{serviceProviders:t.payload});case"LOAD_TESTIMONIALS":return Object(g.a)({},e,{testimonials:t.payload});case"LOAD_COMMUNITIES":return Object(g.a)({},e,{communities:t.payload});case"LOAD_TAG_COLS":return Object(g.a)({},e,{tagCols:t.payload});case"ADD_TESTIMONIAL":return Object(g.a)({},e,{testimonials:[].concat(Object(on.a)(e.testimonials),[t.payload])});case"REMOVE_TESTIMONIAL":return Object(g.a)({},e,{testimonials:e.testimonials.filter(function(e){return e.id!==t.payload.id})});case"LOAD_EVENT_RSVPS":return Object(g.a)({},e,{rsvps:t.payload});case"ADD_RSVP":return Object(g.a)({},e,{rsvps:[].concat(Object(on.a)(e.rsvps),[t.payload])});case"REMOVE_RSVP":return Object(g.a)({},e,{rsvps:e.rsvps.filter(function(e){return e.id!==t.payload.id})});case"CHANGE_RSVP":return Object(g.a)({},e,{rsvps:[].concat(Object(on.a)(e.rsvps.filter(function(e){return e.id!==t.payload.id})),[t.payload])});case"ADD_TEAM_MEMBER":var a=e.teamsPage.filter(function(e){return e.team.id===t.payload.team.id})[0],n=Object(g.a)({},a,{households:a.households+t.payload.member.households,actions:a.actions+t.payload.member.actions,actions_completed:a.actions_completed+t.payload.member.actions_completed,actions_todo:a.actions_todo+t.payload.member.actions_todo});return Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.team.id})),[n])});case"REMOVE_TEAM_MEMBER":return a=e.teamsPage.filter(function(e){return e.team.id===t.payload.team.id})[0],Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.team.id})),[Object(g.a)({},a,{households:a.households-t.payload.member.households,actions:a.actions-t.payload.member.actions,actions_completed:a.actions_completed-t.payload.member.actions_completed,actions_todo:a.actions_todo-t.payload.member.actions_todo})])});case"TEAM_ADD_ACTION":return a=e.teamsPage.filter(function(e){return e.team.id===t.payload.id})[0],Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.id})),[Object(g.a)({},a,{actions_completed:a.actions_completed+1})])});case"TEAM_REMOVE_ACTION":return a=e.teamsPage.filter(function(e){return e.team.id===t.payload.id})[0],Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.id})),[Object(g.a)({},a,{actions_completed:a.actions_completed-1})])});case"TEAM_ADD_HOUSEHOLD":return a=e.teamsPage.filter(function(e){return e.team.id===t.payload.id})[0],Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.id})),[Object(g.a)({},a,{households:a.households+1})])});case"TEAM_REMOVE_HOUSEHOLD":return a=e.teamsPage.filter(function(e){return e.team.id===t.payload.id})[0],Object(g.a)({},e,{teamsPage:[].concat(Object(on.a)(e.teamsPage.filter(function(e){return e.team.id!==t.payload.id})),[Object(g.a)({},a,{households:a.households-1})])});case"CHANGE_DATA":return Object(g.a)({},e,{communityData:[].concat(Object(on.a)(e.communityData.filter(function(e){return e.id!==t.payload.id})),[t.payload])});default:return Object(g.a)({},e)}},links:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_LINKS":return Object(g.a)({},t.payload);default:return Object(g.a)({},e)}},router:Object(an.a)(rn),firebase:C.firebaseReducer}),mn=[tn.a],dn=Object(ht.e)(un,Object(ht.d)(ht.a.apply(void 0,mn))),pn=a(337),hn={firebase:vt,config:{userProfile:"users",firebaseStateName:"firebase"},dispatch:dn.dispatch};s.a.render(r.a.createElement(S.Provider,{store:dn},r.a.createElement(C.ReactReduxFirebaseProvider,hn,r.a.createElement(pn.ConnectedRouter,{history:rn},r.a.createElement(en,null,r.a.createElement(Za,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},81:function(e,t,a){e.exports=a.p+"static/media/logo.ee45265d.png"}},[[341,1,2]]]);
//# sourceMappingURL=main.15d3ba33.chunk.js.map